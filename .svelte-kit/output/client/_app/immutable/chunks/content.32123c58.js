import{d as f,w as n}from"./index.2202404a.js";const o=n([]),d=n(null),a=n(null),i=n(null),l=n([]),g=f(o,e=>e.reduce((s,t)=>{const u=t.metadata.category;return s[u]||(s[u]=[]),s[u].push(t),s},{}));f([d,l],([e,s])=>e&&s.find(t=>t.courseId===e.id)||null);const m={loadCourses:e=>{o.set(e)},selectCourse:e=>{o.subscribe(s=>{const t=s.find(u=>u.slug===e);d.set(t||null)})()},updateNavigation:e=>{i.set(e)},selectPage:e=>{a.set(e)},updateProgress:e=>{l.update(s=>{const t=s.findIndex(u=>u.userId===e.userId&&u.courseId===e.courseId);return t>=0?s[t]=e:s.push(e),s})},markPageCompleted:(e,s,t)=>{l.update(u=>{const r=u.find(c=>c.userId===e&&c.courseId===s);return r&&!r.completedPages.includes(t)&&(r.completedPages.push(t),r.lastAccessedAt=new Date),u})},reset:()=>{o.set([]),d.set(null),a.set(null),i.set(null),l.set([])}};export{g as a,d as b,m as c};
