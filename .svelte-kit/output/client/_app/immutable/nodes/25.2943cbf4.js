import{s as me,a as T,f as m,A as he,d as v,c as M,g as h,h as E,B,j as _,i as F,x as n,z as ce,o as _e,y as X,l as H,m as R,C as re,n as G,e as ie,k as ue,D as de}from"../chunks/scheduler.8dd50edf.js";import{S as ge,i as xe,t as le,c as be,a as ne,g as Ce,b as Ee,d as ze,m as Se,e as Ie}from"../chunks/index.af76732a.js";import{Q as we}from"../chunks/QCMCard.c811cc19.js";import{d as oe,w as De}from"../chunks/index.1e5ee360.js";const fe={currentExercise:null,userAnswer:null,result:null,isSubmitting:!1,timeStarted:null,collection:null,currentIndex:0},K=De(fe),ke=oe(K,s=>s.currentExercise);oe(K,s=>s.currentExercise!==null);const Ve=oe(K,s=>s.collection?{current:s.currentIndex+1,total:s.collection.exercises.length,percentage:Math.round(s.currentIndex/s.collection.exercises.length*100)}:{current:0,total:0,percentage:0}),te={loadCollection:s=>{K.update(t=>({...t,collection:s,currentIndex:0,currentExercise:s.exercises[0]||null,userAnswer:null,result:null,timeStarted:new Date}))},nextExercise:()=>{K.update(s=>{if(!s.collection)return s;const t=s.currentIndex+1,e=s.collection.exercises[t]||null;return{...s,currentIndex:t,currentExercise:e,userAnswer:null,result:null,timeStarted:e?new Date:null}})},submitQCMAnswer:async s=>new Promise(t=>{K.update(e=>{if(!e.currentExercise||e.currentExercise.type!=="qcm")return t(null),e;const l=e.currentExercise,d=e.timeStarted?Math.floor((Date.now()-e.timeStarted.getTime())/1e3):0,r={exerciseId:l.id,type:"qcm",answer:{selectedOptions:s},timeSpent:d,submittedAt:new Date},a=ye(l,s,r);return t(a),{...e,userAnswer:r,result:a,isSubmitting:!1}})}),submitTrueFalseAnswer:async s=>new Promise(t=>{K.update(e=>{if(!e.currentExercise||e.currentExercise.type!=="true-false")return t(null),e;const l=e.currentExercise,d=e.timeStarted?Math.floor((Date.now()-e.timeStarted.getTime())/1e3):0,r={exerciseId:l.id,type:"true-false",answer:s,timeSpent:d,submittedAt:new Date},a=s===l.correctAnswer,p=a?l.points:0,o={exerciseId:l.id,userId:"current-user",answer:r,isCorrect:a,score:p,maxScore:l.points,feedback:a?"Correct ! üéâ":"Incorrect üòî",explanation:l.explanation,completedAt:new Date};return t(o),{...e,userAnswer:r,result:o,isSubmitting:!1}})}),reset:()=>{K.set(fe)}};function ye(s,t,e){const l=s.options.filter(p=>p.isCorrect).map(p=>p.id),d=s.multipleCorrect?Ae(t.sort(),l.sort()):t.length===1&&l.includes(t[0]);let r=0;if(d)r=s.points;else if(s.multipleCorrect){const p=t.filter(u=>l.includes(u)).length,o=t.filter(u=>!l.includes(u)).length;r=Math.max(0,(p-o)/l.length*s.points)}const a=d?"üéâ Excellent ! R√©ponse correcte.":r>0?`‚ö° Partiellement correct. Score: ${Math.round(r)}/${s.points}`:"‚ùå R√©ponse incorrecte.";return{exerciseId:s.id,userId:"current-user",answer:e,isCorrect:d,score:Math.round(r),maxScore:s.points,feedback:a,explanation:s.explanation,completedAt:new Date}}function Ae(s,t){return s.length===t.length&&s.every((e,l)=>e===t[l])}function Pe(s){let t,e='<div class="loading-spinner svelte-1oupcgz">‚è≥</div> <p>Chargement des exercices...</p>';return{c(){t=m("div"),t.innerHTML=e,this.h()},l(l){t=h(l,"DIV",{class:!0,"data-svelte-h":!0}),B(t)!=="svelte-4wbx96"&&(t.innerHTML=e),this.h()},h(){_(t,"class","loading-section svelte-1oupcgz")},m(l,d){F(l,t,d)},p:X,i:X,o:X,d(l){l&&v(t)}}}function Te(s){let t,e,l,d="üèÜ",r,a,p="Quiz termin√© !",o,u,w=`F√©licitations ! Vous avez termin√© tous les exercices de cette
            collection.`,x,I,c,z,D="Questions",S,k,j=s[0].total+"",Q,N,q,y,A="Progression",f,i,g=s[0].percentage+"",C,b,V,P,U="üîÑ Recommencer",Y,W;return{c(){t=m("div"),e=m("div"),l=m("div"),l.textContent=d,r=T(),a=m("h2"),a.textContent=p,o=T(),u=m("p"),u.textContent=w,x=T(),I=m("div"),c=m("div"),z=m("span"),z.textContent=D,S=T(),k=m("span"),Q=H(j),N=T(),q=m("div"),y=m("span"),y.textContent=A,f=T(),i=m("span"),C=H(g),b=H("%"),V=T(),P=m("button"),P.textContent=U,this.h()},l(O){t=h(O,"DIV",{class:!0});var J=E(t);e=h(J,"DIV",{class:!0});var L=E(e);l=h(L,"DIV",{class:!0,"data-svelte-h":!0}),B(l)!=="svelte-1uvgfen"&&(l.textContent=d),r=M(L),a=h(L,"H2",{class:!0,"data-svelte-h":!0}),B(a)!=="svelte-1vc9bb8"&&(a.textContent=p),o=M(L),u=h(L,"P",{"data-svelte-h":!0}),B(u)!=="svelte-h2c81g"&&(u.textContent=w),x=M(L),I=h(L,"DIV",{class:!0});var Z=E(I);c=h(Z,"DIV",{class:!0});var $=E(c);z=h($,"SPAN",{class:!0,"data-svelte-h":!0}),B(z)!=="svelte-18drt2j"&&(z.textContent=D),S=M($),k=h($,"SPAN",{class:!0});var ae=E(k);Q=R(ae,j),ae.forEach(v),$.forEach(v),N=M(Z),q=h(Z,"DIV",{class:!0});var ee=E(q);y=h(ee,"SPAN",{class:!0,"data-svelte-h":!0}),B(y)!=="svelte-19ugd61"&&(y.textContent=A),f=M(ee),i=h(ee,"SPAN",{class:!0});var se=E(i);C=R(se,g),b=R(se,"%"),se.forEach(v),ee.forEach(v),Z.forEach(v),V=M(L),P=h(L,"BUTTON",{class:!0,"data-svelte-h":!0}),B(P)!=="svelte-y4t5sg"&&(P.textContent=U),L.forEach(v),J.forEach(v),this.h()},h(){_(l,"class","completion-icon svelte-1oupcgz"),_(a,"class","svelte-1oupcgz"),_(z,"class","stat-label svelte-1oupcgz"),_(k,"class","stat-value svelte-1oupcgz"),_(c,"class","stat svelte-1oupcgz"),_(y,"class","stat-label svelte-1oupcgz"),_(i,"class","stat-value svelte-1oupcgz"),_(q,"class","stat svelte-1oupcgz"),_(I,"class","completion-stats svelte-1oupcgz"),_(P,"class","btn btn-secondary svelte-1oupcgz"),_(e,"class","completion-card svelte-1oupcgz"),_(t,"class","completion-section svelte-1oupcgz")},m(O,J){F(O,t,J),n(t,e),n(e,l),n(e,r),n(e,a),n(e,o),n(e,u),n(e,x),n(e,I),n(I,c),n(c,z),n(c,S),n(c,k),n(k,Q),n(I,N),n(I,q),n(q,y),n(q,f),n(q,i),n(i,C),n(i,b),n(e,V),n(e,P),Y||(W=re(P,"click",s[9]),Y=!0)},p(O,J){J&1&&j!==(j=O[0].total+"")&&G(Q,j),J&1&&g!==(g=O[0].percentage+"")&&G(C,g)},i:X,o:X,d(O){O&&v(t),Y=!1,W()}}}function Me(s){let t,e,l,d,r=s[0].current+"",a,p,o=s[0].total+"",u,w,x,I=s[0].percentage+"",c,z,D,S,k,j,Q,N,q,y,A;N=new we({props:{exercise:s[1],disabled:s[3],showResult:s[3],selectedOptions:s[4]}}),N.$on("submit",s[7]);let f=s[3]&&s[2]&&pe(s);return{c(){t=m("div"),e=m("div"),l=m("span"),d=H("Question "),a=H(r),p=H(" sur "),u=H(o),w=T(),x=m("span"),c=H(I),z=H("%"),D=T(),S=m("div"),k=m("div"),j=T(),Q=m("div"),Ee(N.$$.fragment),q=T(),f&&f.c(),y=ie(),this.h()},l(i){t=h(i,"DIV",{class:!0});var g=E(t);e=h(g,"DIV",{class:!0});var C=E(e);l=h(C,"SPAN",{class:!0});var b=E(l);d=R(b,"Question "),a=R(b,r),p=R(b," sur "),u=R(b,o),b.forEach(v),w=M(C),x=h(C,"SPAN",{class:!0});var V=E(x);c=R(V,I),z=R(V,"%"),V.forEach(v),C.forEach(v),D=M(g),S=h(g,"DIV",{class:!0});var P=E(S);k=h(P,"DIV",{class:!0,style:!0}),E(k).forEach(v),P.forEach(v),g.forEach(v),j=M(i),Q=h(i,"DIV",{class:!0});var U=E(Q);ze(N.$$.fragment,U),U.forEach(v),q=M(i),f&&f.l(i),y=ie(),this.h()},h(){_(l,"class","progress-text svelte-1oupcgz"),_(x,"class","progress-percentage svelte-1oupcgz"),_(e,"class","progress-info svelte-1oupcgz"),_(k,"class","progress-fill svelte-1oupcgz"),ue(k,"width",s[0].percentage+"%"),_(S,"class","progress-bar svelte-1oupcgz"),_(t,"class","progress-section svelte-1oupcgz"),_(Q,"class","exercise-section svelte-1oupcgz")},m(i,g){F(i,t,g),n(t,e),n(e,l),n(l,d),n(l,a),n(l,p),n(l,u),n(e,w),n(e,x),n(x,c),n(x,z),n(t,D),n(t,S),n(S,k),F(i,j,g),F(i,Q,g),Se(N,Q,null),F(i,q,g),f&&f.m(i,g),F(i,y,g),A=!0},p(i,g){(!A||g&1)&&r!==(r=i[0].current+"")&&G(a,r),(!A||g&1)&&o!==(o=i[0].total+"")&&G(u,o),(!A||g&1)&&I!==(I=i[0].percentage+"")&&G(c,I),(!A||g&1)&&ue(k,"width",i[0].percentage+"%");const C={};g&2&&(C.exercise=i[1]),g&8&&(C.disabled=i[3]),g&8&&(C.showResult=i[3]),g&16&&(C.selectedOptions=i[4]),N.$set(C),i[3]&&i[2]?f?f.p(i,g):(f=pe(i),f.c(),f.m(y.parentNode,y)):f&&(f.d(1),f=null)},i(i){A||(ne(N.$$.fragment,i),A=!0)},o(i){le(N.$$.fragment,i),A=!1},d(i){i&&(v(t),v(j),v(Q),v(q),v(y)),Ie(N),f&&f.d(i)}}}function pe(s){let t,e,l,d,r=s[2].isCorrect?"üéâ":"üí™",a,p,o,u,w=s[2].feedback+"",x,I,c,z,D=s[2].score+"",S,k,j=s[2].maxScore+"",Q,N,q,y,A,f=s[2].explanation&&ve(s);function i(b,V){return b[6]?Ne:Qe}let g=i(s),C=g(s);return{c(){t=m("div"),e=m("div"),l=m("div"),d=m("div"),a=H(r),p=T(),o=m("div"),u=m("h3"),x=H(w),I=T(),c=m("p"),z=H("Score: "),S=H(D),k=H("/"),Q=H(j),N=H(" points"),q=T(),f&&f.c(),y=T(),A=m("div"),C.c(),this.h()},l(b){t=h(b,"DIV",{class:!0});var V=E(t);e=h(V,"DIV",{class:!0});var P=E(e);l=h(P,"DIV",{class:!0});var U=E(l);d=h(U,"DIV",{class:!0});var Y=E(d);a=R(Y,r),Y.forEach(v),p=M(U),o=h(U,"DIV",{class:!0});var W=E(o);u=h(W,"H3",{class:!0});var O=E(u);x=R(O,w),O.forEach(v),I=M(W),c=h(W,"P",{class:!0});var J=E(c);z=R(J,"Score: "),S=R(J,D),k=R(J,"/"),Q=R(J,j),N=R(J," points"),J.forEach(v),W.forEach(v),U.forEach(v),q=M(P),f&&f.l(P),y=M(P),A=h(P,"DIV",{class:!0});var L=E(A);C.l(L),L.forEach(v),P.forEach(v),V.forEach(v),this.h()},h(){_(d,"class","result-icon svelte-1oupcgz"),_(u,"class","result-title svelte-1oupcgz"),_(c,"class","result-score svelte-1oupcgz"),_(o,"class","result-info"),_(l,"class","result-header svelte-1oupcgz"),_(A,"class","result-actions svelte-1oupcgz"),_(e,"class","result-card svelte-1oupcgz"),de(e,"correct",s[2].isCorrect),_(t,"class","result-section svelte-1oupcgz")},m(b,V){F(b,t,V),n(t,e),n(e,l),n(l,d),n(d,a),n(l,p),n(l,o),n(o,u),n(u,x),n(o,I),n(o,c),n(c,z),n(c,S),n(c,k),n(c,Q),n(c,N),n(e,q),f&&f.m(e,null),n(e,y),n(e,A),C.m(A,null)},p(b,V){V&4&&r!==(r=b[2].isCorrect?"üéâ":"üí™")&&G(a,r),V&4&&w!==(w=b[2].feedback+"")&&G(x,w),V&4&&D!==(D=b[2].score+"")&&G(S,D),V&4&&j!==(j=b[2].maxScore+"")&&G(Q,j),b[2].explanation?f?f.p(b,V):(f=ve(b),f.c(),f.m(e,y)):f&&(f.d(1),f=null),g===(g=i(b))&&C?C.p(b,V):(C.d(1),C=g(b),C&&(C.c(),C.m(A,null))),V&4&&de(e,"correct",b[2].isCorrect)},d(b){b&&v(t),f&&f.d(),C.d()}}}function ve(s){let t,e,l="üìñ Explication:",d,r,a=s[2].explanation+"",p;return{c(){t=m("div"),e=m("strong"),e.textContent=l,d=T(),r=m("p"),p=H(a),this.h()},l(o){t=h(o,"DIV",{class:!0});var u=E(t);e=h(u,"STRONG",{class:!0,"data-svelte-h":!0}),B(e)!=="svelte-rnhzp9"&&(e.textContent=l),d=M(u),r=h(u,"P",{});var w=E(r);p=R(w,a),w.forEach(v),u.forEach(v),this.h()},h(){_(e,"class","svelte-1oupcgz"),_(t,"class","result-explanation svelte-1oupcgz")},m(o,u){F(o,t,u),n(t,e),n(t,d),n(t,r),n(r,p)},p(o,u){u&4&&a!==(a=o[2].explanation+"")&&G(p,a)},d(o){o&&v(t)}}}function Qe(s){let t,e="‚û°Ô∏è Question suivante",l,d;return{c(){t=m("button"),t.textContent=e,this.h()},l(r){t=h(r,"BUTTON",{class:!0,"data-svelte-h":!0}),B(t)!=="svelte-15t93aa"&&(t.textContent=e),this.h()},h(){_(t,"class","btn btn-primary svelte-1oupcgz")},m(r,a){F(r,t,a),l||(d=re(t,"click",s[8]),l=!0)},p:X,d(r){r&&v(t),l=!1,d()}}}function Ne(s){let t,e="üîÑ Recommencer le quiz",l,d;return{c(){t=m("button"),t.textContent=e,this.h()},l(r){t=h(r,"BUTTON",{class:!0,"data-svelte-h":!0}),B(t)!=="svelte-1go9gs8"&&(t.textContent=e),this.h()},h(){_(t,"class","btn btn-primary svelte-1oupcgz")},m(r,a){F(r,t,a),l||(d=re(t,"click",s[9]),l=!0)},p:X,d(r){r&&v(t),l=!1,d()}}}function qe(s){let t,e,l,d='<h1 class="svelte-1oupcgz">üéØ Test des Exercices - Phase 3</h1> <p class="svelte-1oupcgz">Syst√®me d&#39;exercices QCM interactifs avec validation automatique</p>',r,a,p,o,u;const w=[Me,Te,Pe],x=[];function I(c,z){return c[1]?0:c[5]?1:2}return p=I(s),o=x[p]=w[p](s),{c(){t=T(),e=m("div"),l=m("header"),l.innerHTML=d,r=T(),a=m("div"),o.c(),this.h()},l(c){he("svelte-f9zim5",document.head).forEach(v),t=M(c),e=h(c,"DIV",{class:!0});var D=E(e);l=h(D,"HEADER",{class:!0,"data-svelte-h":!0}),B(l)!=="svelte-1jahj6"&&(l.innerHTML=d),r=M(D),a=h(D,"DIV",{class:!0});var S=E(a);o.l(S),S.forEach(v),D.forEach(v),this.h()},h(){document.title="Test Exercices - FunLearning V3.0",_(l,"class","page-header svelte-1oupcgz"),_(a,"class","container svelte-1oupcgz"),_(e,"class","test-exercises-page svelte-1oupcgz")},m(c,z){F(c,t,z),F(c,e,z),n(e,l),n(e,r),n(e,a),x[p].m(a,null),u=!0},p(c,[z]){let D=p;p=I(c),p===D?x[p].p(c,z):(Ce(),le(x[D],1,1,()=>{x[D]=null}),be(),o=x[p],o?o.p(c,z):(o=x[p]=w[p](c),o.c()),ne(o,1),o.m(a,null))},i(c){u||(ne(o),u=!0)},o(c){le(o),u=!1},d(c){c&&(v(t),v(e)),x[p].d()}}}function He(s,t,e){let l,d,r,a,p,o;ce(s,ke,S=>e(10,p=S)),ce(s,Ve,S=>e(11,o=S));let u=null,w=!1,x=[];const I={id:"test-collection-1",title:"Quiz JavaScript D√©butant",description:"Testez vos connaissances de base en JavaScript",totalPoints:30,estimatedTime:10,exercises:[{id:"js-1",title:"Variables JavaScript",description:"Connaissances de base sur les variables",type:"qcm",difficulty:"debutant",points:10,category:"javascript",tags:["variables","fondamentaux"],question:"Quelle est la fa√ßon correcte de d√©clarer une variable en JavaScript moderne ?",options:[{id:"opt1",text:'var myVariable = "Hello";',isCorrect:!1,explanation:"var est l'ancienne syntaxe, pas recommand√©e"},{id:"opt2",text:'let myVariable = "Hello";',isCorrect:!0,explanation:"let est la syntaxe moderne recommand√©e"},{id:"opt3",text:'variable myVariable = "Hello";',isCorrect:!1,explanation:"Cette syntaxe n'existe pas en JavaScript"},{id:"opt4",text:'const myVariable = "Hello";',isCorrect:!0,explanation:"const est aussi recommand√© pour les valeurs constantes"}],explanation:"En JavaScript moderne, utilisez let pour les variables qui changent et const pour les constantes.",multipleCorrect:!0,createdAt:new Date,updatedAt:new Date}]};_e(()=>{console.log("üéØ Initialisation du test des exercices"),te.loadCollection(I)});async function c(S){const k=await te.submitQCMAnswer(S.detail.selectedOptions);k&&(e(2,u=k),e(3,w=!0),e(4,x=S.detail.selectedOptions))}function z(){e(3,w=!1),e(2,u=null),e(4,x=[]),te.nextExercise()}function D(){e(3,w=!1),e(2,u=null),e(4,x=[]),te.loadCollection(I)}return s.$$.update=()=>{s.$$.dirty&2048&&e(0,l=o),s.$$.dirty&1024&&e(1,d=p),s.$$.dirty&1&&e(6,r=l.current===l.total),s.$$.dirty&3&&e(5,a=!d&&l.current>0)},[l,d,u,w,x,a,r,c,z,D,p,o]}class Fe extends ge{constructor(t){super(),xe(this,t,He,qe,me,{})}}export{Fe as component};
