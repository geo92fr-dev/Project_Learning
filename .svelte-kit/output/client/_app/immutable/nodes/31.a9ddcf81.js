var Ps=Object.defineProperty;var Ms=(o,e,t)=>e in o?Ps(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var ee=(o,e,t)=>(Ms(o,typeof e!="symbol"?e+"":e,t),t);import{M as oe,s as qs,f as m,l as V,a as k,g as h,h as y,m as j,d as g,c as S,B as H,j as u,k as is,i as Z,x as l,C as Me,n as te,z as Qt,o as Is,a6 as Ts,y as ut,J as At,H as qt,I as It,E as Rs,N as Xe,a7 as Bt,K as dt,e as Tt,A as As,D as rt}from"../chunks/scheduler.9ed29267.js";import{S as ks,i as Ss,g as Ht,t as Ze,c as Ut,a as Be,f as ft,h as Ds,b as Qs,d as zs,m as Ls,e as Vs}from"../chunks/index.c5ac0418.js";import{e as ae}from"../chunks/each.287b3127.js";import{d as Ft,w as xe}from"../chunks/index.ce9bc0b6.js";import{f as Rt,s as Lt}from"../chunks/index.2ffcbca7.js";const ot=xe([]),_t=xe([]),bt=xe("idle"),kt=xe(0);Ft([_t,bt],([o,e])=>e==="completed"&&o.length>0?Ns(o):null);const lt=[{id:"js-001",type:"multiple_choice",question:"Quelle est la m√©thode correcte pour d√©clarer une variable en JavaScript moderne ?",competence:"javascript-fundamentals",difficulty:2,options:["var myVar = 5;","let myVar = 5;","myVar = 5;","const myVar;"],correct_answer:"let myVar = 5;",explanation:"let est la m√©thode moderne recommand√©e pour d√©clarer des variables",time_limit:30,skill_indicators:["variable-declaration","modern-javascript"]},{id:"ts-001",type:"multiple_choice",question:"Quel est l'avantage principal de TypeScript par rapport √† JavaScript ?",competence:"typescript-fundamentals",difficulty:3,options:["Plus rapide √† l'ex√©cution","Typage statique","Syntaxe plus simple","Compatibilit√© mobile"],correct_answer:"Typage statique",explanation:"Le typage statique aide √† d√©tecter les erreurs √† la compilation",time_limit:45,skill_indicators:["typescript-benefits","static-typing"]},{id:"sv-001",type:"multiple_choice",question:"Comment impl√©menter une r√©activit√© d√©riv√©e en Svelte ?",competence:"svelte-advanced",difficulty:4,options:["$: derivedValue = baseValue * 2;","derived(baseValue, v => v * 2);","reactive(() => baseValue * 2);","computed(() => baseValue * 2);"],correct_answer:"$: derivedValue = baseValue * 2;",explanation:"Syntaxe reactive statement de Svelte",time_limit:60,skill_indicators:["svelte-reactivity","reactive-statements"]},{id:"html-001",type:"multiple_choice",question:"Quelle balise HTML est s√©mantiquement correcte pour un titre principal ?",competence:"html-semantics",difficulty:1,options:["<title>","<h1>","<header>","<main>"],correct_answer:"<h1>",explanation:"h1 repr√©sente le titre principal d'une page",time_limit:20,skill_indicators:["html-semantics","accessibility"]},{id:"git-001",type:"multiple_choice",question:"Quelle commande Git permet de fusionner une branche dans la branche actuelle ?",competence:"git-workflow",difficulty:3,options:["git branch merge","git merge <branche>","git pull <branche>","git join <branche>"],correct_answer:"git merge <branche>",explanation:"git merge fusionne une branche sp√©cifi√©e dans la branche actuelle",time_limit:30,skill_indicators:["git-commands","branch-management"]}];class Vt{constructor(){ee(this,"responses",[]);ee(this,"competenceScores",new Map)}calculateMasteryProbability(e,t,s=.5){if(t.length===0)return s;let n=s;const i=.1,r=.15;for(const a of t)a.correct?n=n+(1-n)*i:n=n*(1-r);return Math.max(0,Math.min(1,n))}adaptDifficulty(e,t){const s=e.filter(r=>r.correct).length/e.length,n=e.reduce((r,a)=>r+a.timeSpent,0)/e.length;let i=0;return s>.8?i+=.1:s<.4&&(i-=.1),n<20?i+=.05:n>90&&(i-=.05),Math.max(.1,Math.min(1,t+i))}calculateEngagementMetrics(e){const t=Math.min(1,e.interactions/(e.duration/60)),s=e.interactions/e.questionsAnswered,n=e.questionsAnswered/(e.questionsAnswered+5),i=e.correctAnswers/e.questionsAnswered;return{focus_score:Math.max(0,Math.min(1,t)),interaction_rate:Math.max(0,s),completion_rate:Math.max(0,Math.min(1,n)),accuracy_rate:Math.max(0,Math.min(1,i))}}selectNextQuestion(e){const t=this.responses.map(i=>i.question_id),s=e.filter(i=>!t.includes(i.id));if(s.length===0)return null;if(this.responses.length===0)return s.find(i=>i.difficulty===3)||s[0];const n=this.calculateRecentPerformance();return n>.8?s.find(i=>i.difficulty>=4)||s.find(i=>i.difficulty===3)||s[0]:n<.4?s.find(i=>i.difficulty<=2)||s.find(i=>i.difficulty===3)||s[0]:s.find(i=>i.difficulty===3)||s.find(i=>i.difficulty===2)||s[0]}calculateRecentPerformance(){const e=this.responses.slice(-3);return e.length===0?.5:e.filter(s=>this.isCorrect(s)).length/e.length}isCorrect(e){const t=lt.find(s=>s.id===e.question_id);return t?t.correct_answer===e.answer:!1}updateCompetenceScores(e){this.responses.push(e);const t=lt.find(a=>a.id===e.question_id);if(!t)return;const s=this.isCorrect(e),n=this.competenceScores.get(t.competence)||.5,i=.3,r=.1;if(s){const a=n+(1-n)*i;this.competenceScores.set(t.competence,Math.min(1,a))}else{const a=n-n*r;this.competenceScores.set(t.competence,Math.max(0,a))}}shouldContinue(){if(this.responses.length<3)return!0;if(this.responses.length>=8)return!1;const n=Array.from(this.competenceScores.values());if(n.length<2)return!0;const i=n.reduce((a,d)=>a+d,0)/n.length;return n.reduce((a,d)=>a+Math.pow(d-i,2),0)/n.length>.15}generateAnalysis(){const e=this.responses.filter(I=>this.isCorrect(I)),t=this.responses.length,s=e.length,n=t>0?s/t*100:0;let i=0,r=0;for(const I of this.responses){const x=lt.find(C=>C.id===I.question_id);if(x){const C=x.difficulty,p=this.isCorrect(I);i+=p?C:0,r+=C}}const a=r>0?i/r*100:0;let d;a>=85?d="expert":a>=70?d="advanced":a>=50?d="intermediate":d="beginner";const _=this.responses.length>0?this.responses.reduce((I,x)=>I+x.time_taken,0)/this.responses.length:0,c=this.calculateConfidenceCorrelation(),f=this.calculateDifficultyProgression(),v=this.generateRecommendations(d,a);return{rawScore:s,percentage:n,adjustedScore:a,competenceLevel:d,avgTimePerQuestion:_,confidenceCorrelation:c,difficultyProgression:f,recommendations:v,competenceScores:Object.fromEntries(this.competenceScores)}}calculateConfidenceCorrelation(){const e=this.responses.filter(n=>n.confidence_level!==void 0);if(e.length<2)return 0;let t=0,s=0;for(const n of e){const i=this.isCorrect(n)?1:0,r=(n.confidence_level-1)/4;t+=i===1&&r>.6?1:0,s++}return s>0?t/s:0}calculateDifficultyProgression(){const e=[0,0,0,0,0];for(const t of this.responses){const s=lt.find(n=>n.id===t.question_id);if(s){const n=this.isCorrect(t)?1:0,i=s.difficulty-1;e[i]=n}}return e}generateRecommendations(e,t){const s=[];return e==="beginner"?(s.push("Commencer par les concepts fondamentaux"),s.push("Privil√©gier les exercices guid√©s"),s.push("Pr√©voir plus de temps pour chaque concept")):e==="intermediate"?(s.push("Alterner th√©orie et pratique"),s.push("Utiliser des projets pratiques"),s.push("R√©viser les bases si n√©cessaire")):e==="advanced"?(s.push("Aborder des concepts avanc√©s"),s.push("Travailler sur des projets complexes"),s.push("Enseigner √† d'autres pour renforcer")):(s.push("Cr√©er vos propres projets"),s.push("Explorer des technologies √©mergentes"),s.push("Contribuer √† des projets open source")),s}}class js{constructor(){ee(this,"adaptiveEngine");ee(this,"sessionId");ee(this,"userId","");this.adaptiveEngine=new Vt,this.sessionId=this.generateSessionId()}async startAssessment(e,t){this.userId=e;const s=t?lt.filter(n=>t.includes(n.competence)):lt;ot.set(s),_t.set([]),bt.set("running"),kt.set(0),console.log(`üéØ Pr√©-√©valuation d√©marr√©e pour l'utilisateur ${e}`),console.log(`üìù ${s.length} questions disponibles`)}async submitResponse(e){const t={...e,timestamp:new Date};if(_t.update(n=>[...n,t]),this.adaptiveEngine.updateCompetenceScores(t),this.adaptiveEngine.shouldContinue()){const n=oe(ot),i=this.adaptiveEngine.selectNextQuestion(n);if(i){const r=n.findIndex(a=>a.id===i.id);return kt.set(r),!0}}return await this.completeAssessment(),!1}async completeAssessment(){bt.set("analyzing"),await new Promise(t=>setTimeout(t,1500));const e=this.adaptiveEngine.generateAnalysis();console.log("üß† Analyse de pr√©-√©valuation termin√©e:",e),bt.set("completed")}getCurrentQuestion(){const e=oe(ot),t=oe(kt);return e[t]||null}getNextRecommendedQuestion(){const e=oe(ot);return this.adaptiveEngine.selectNextQuestion(e)}generateSessionId(){return`assess_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateResult(){var _,c,f,v;const e=oe(_t),t=oe(ot);if(e.length===0)return null;const s=this.adaptiveEngine.generateAnalysis(),n=(_=e[0])==null?void 0:_.timestamp,i=(c=e[e.length-1])==null?void 0:c.timestamp,r=i&&n?i.getTime()-n.getTime():0,a={user_id:this.userId,competence:((f=t[0])==null?void 0:f.competence)||"general",current_level:s.competenceLevel,target_level:this.getTargetLevel(s.competenceLevel),estimated_completion_time:this.estimatePathDuration(s.competenceLevel),learning_style:this.generateLearningStyle(),recommended_resources:[],milestones:this.generateMilestones(s.competenceLevel),adaptation_triggers:[],personalization_factors:[]};return{user_id:this.userId,competence:((v=t[0])==null?void 0:v.competence)||"general",session_id:this.sessionId,start_time:n||new Date,end_time:i||new Date,total_duration:r,questions:t.filter(I=>e.some(x=>x.question_id===I.id)),responses:e,score:{raw_score:s.rawScore,percentage:s.percentage,adjusted_score:s.adjustedScore,competence_level:s.competenceLevel},analytics:{average_time_per_question:s.avgTimePerQuestion,confidence_correlation:s.confidenceCorrelation,difficulty_progression:s.difficultyProgression,recommendations:s.recommendations},adaptive_path:a}}estimatePathDuration(e){switch(e){case"beginner":return 20;case"intermediate":return 15;case"advanced":return 10;case"expert":return 5;default:return 15}}getTargetLevel(e){switch(e){case"beginner":return"intermediate";case"intermediate":return"advanced";case"advanced":return"expert";case"expert":return"expert";default:return"intermediate"}}generateLearningStyle(){return{visual:70,auditory:20,kinesthetic:50,reading_writing:60,dominant_style:"visual",learning_pace:"normal",attention_span:"medium"}}generateMilestones(e){const t=[{title:"Concepts fondamentaux",estimated_duration:25,completion_criteria:["Comprendre les bases"],resources:[]},{title:"Application pratique",estimated_duration:35,completion_criteria:["R√©aliser des exercices"],resources:[]},{title:"Projet personnel",estimated_duration:40,completion_criteria:["Cr√©er un projet"],resources:[]}];return e==="beginner"?[{title:"Initiation",estimated_duration:20,completion_criteria:["D√©couvrir les concepts"],resources:[]},...t]:t}reset(){ot.set([]),_t.set([]),bt.set("idle"),kt.set(0),this.adaptiveEngine=new Vt,this.sessionId=this.generateSessionId(),this.userId=""}}function Ns(o){if(o.length===0)return null;const e=new Vt;for(const t of o)e.updateCompetenceScores(t);return e.generateAnalysis()}new js;const zt=xe(null),yt=xe([]),vt=xe("idle"),rs=xe(0);Ft([yt],([o])=>o.length===0?null:Us(o));const xt=[{id:"plan-001",type:"self_assessment",trigger:"before_lesson",question:"Avant de commencer cette le√ßon, que savez-vous d√©j√† sur ce sujet ?",sub_questions:["Quelles sont vos connaissances pr√©alables ?","Qu'esp√©rez-vous apprendre ?","Quelles strat√©gies allez-vous utiliser ?"],guidance:"Prenez un moment pour r√©fl√©chir √† vos connaissances actuelles. Cela vous aidera √† mieux comprendre les nouveaux concepts.",expected_elements:["connaissances pr√©alables","objectifs d'apprentissage","strat√©gies"],competence_focus:"metacognition-planning"},{id:"plan-002",type:"strategy",trigger:"before_lesson",question:"Comment allez-vous organiser votre temps d'apprentissage pour cette session ?",sub_questions:["Combien de temps avez-vous pr√©vu ?","Comment allez-vous diviser ce temps ?","Que ferez-vous si vous rencontrez des difficult√©s ?"],guidance:"Une bonne planification am√©liore l'efficacit√© de l'apprentissage. Pensez √† pr√©voir du temps pour la r√©vision.",expected_elements:["gestion du temps","strat√©gies de r√©solution","planification"],competence_focus:"time-management"},{id:"monitor-001",type:"monitoring",trigger:"during_lesson",question:"√Ä ce stade, comprenez-vous bien les concepts pr√©sent√©s ?",sub_questions:["Quels points vous semblent clairs ?","Y a-t-il des √©l√©ments confus ?","Avez-vous besoin d'ajuster votre approche ?"],guidance:"Faire le point r√©guli√®rement permet d'identifier les difficult√©s avant qu'elles s'accumulent.",expected_elements:["compr√©hension","auto-√©valuation","ajustements"],competence_focus:"self-monitoring"},{id:"monitor-002",type:"monitoring",trigger:"during_lesson",question:"Votre strat√©gie d'apprentissage fonctionne-t-elle bien pour ce contenu ?",sub_questions:["√ätes-vous satisfait de votre progression ?","Devriez-vous changer d'approche ?","Qu'est-ce qui vous aide le mieux √† comprendre ?"],guidance:"Adapter sa strat√©gie en cours de route est une comp√©tence m√©tacognitive importante.",expected_elements:["√©valuation strat√©gie","adaptation","pr√©f√©rences d'apprentissage"],competence_focus:"strategy-adaptation"},{id:"eval-001",type:"evaluation",trigger:"after_lesson",question:"Maintenant que vous avez termin√© cette le√ßon, qu'avez-vous retenu ?",sub_questions:["Quels sont les points cl√©s que vous avez appris ?","Qu'est-ce qui reste flou ?","Comment pourriez-vous am√©liorer votre compr√©hension ?"],guidance:"La r√©flexion apr√®s l'apprentissage consolide les connaissances et aide √† identifier les lacunes.",expected_elements:["synth√®se","identification lacunes","pistes am√©lioration"],competence_focus:"knowledge-consolidation"},{id:"eval-002",type:"evaluation",trigger:"after_lesson",question:"Comment √©valuez-vous l'efficacit√© de votre session d'apprentissage ?",sub_questions:["Vos objectifs ont-ils √©t√© atteints ?","Qu'est-ce qui a bien fonctionn√© ?","Que feriez-vous diff√©remment la prochaine fois ?"],guidance:"√âvaluer ses m√©thodes d'apprentissage permet de s'am√©liorer continuellement.",expected_elements:["auto-√©valuation","points positifs","am√©liorations"],competence_focus:"self-evaluation"},{id:"strategy-001",type:"strategy",trigger:"after_exercise",question:"Comment avez-vous abord√© cet exercice ? D√©crivez votre d√©marche.",sub_questions:["Quelle √©tait votre premi√®re approche ?","Avez-vous rencontr√© des obstacles ?","Comment les avez-vous surmont√©s ?"],guidance:"Prendre conscience de sa d√©marche de r√©solution aide √† d√©velopper de meilleures strat√©gies.",expected_elements:["m√©thode de r√©solution","gestion obstacles","processus de pens√©e"],competence_focus:"problem-solving"},{id:"reflect-001",type:"reflection",trigger:"after_exercise",question:"Que vous a appris cet exercice sur votre fa√ßon d'apprendre ?",sub_questions:["Quelles sont vos forces ?","Quels sont vos points d'am√©lioration ?","Comment appliquer ces insights √† l'avenir ?"],guidance:"La r√©flexion sur ses propres processus d'apprentissage est au c≈ìur de la m√©tacognition.",expected_elements:["auto-connaissance","forces/faiblesses","transfert"],competence_focus:"self-knowledge"}];class Os{analyzeResponseQuality(e,t){let s=0;const n=100,i=e.word_count;i>=50?s+=20:i>=25?s+=15:i>=10?s+=10:s+=5;const r=e.content.toLowerCase();let a=0;for(const f of t.expected_elements)(r.includes(f.toLowerCase())||this.containsSemanticEquivalent(r,f))&&a++;s+=a/t.expected_elements.length*30;const d=["parce que","car","donc","ainsi","par cons√©quent","je pense que","je crois que","il me semble","par exemple","notamment","en particulier","cependant","n√©anmoins","toutefois","mais"];let _=0;for(const f of d)r.includes(f)&&(_+=3);s+=Math.min(25,_);const c=this.identifyStrategies(r);return s+=c.length/3*25,Math.min(n,s)}identifyStrategies(e){const t=[],s=e.toLowerCase();return(s.includes("planifier")||s.includes("organiser")||s.includes("pr√©parer")||s.includes("objectif"))&&t.push({type:"planning",description:"Planification et organisation",effectiveness:4,context:"Organisation pr√©alable de l'apprentissage"}),(s.includes("v√©rifier")||s.includes("contr√¥ler")||s.includes("surveiller")||s.includes("suivre"))&&t.push({type:"monitoring",description:"Auto-surveillance et contr√¥le",effectiveness:4,context:"Suivi de la compr√©hension en temps r√©el"}),(s.includes("√©valuer")||s.includes("juger")||s.includes("analyser")||s.includes("bilan"))&&t.push({type:"evaluating",description:"√âvaluation et bilan",effectiveness:4,context:"√âvaluation des r√©sultats d'apprentissage"}),(s.includes("erreur")||s.includes("probl√®me")||s.includes("difficult√©")||s.includes("corriger"))&&t.push({type:"debugging",description:"D√©tection et correction d'erreurs",effectiveness:5,context:"R√©solution de probl√®mes d'apprentissage"}),(s.includes("r√©viser")||s.includes("revoir")||s.includes("r√©p√©ter")||s.includes("reprendre"))&&t.push({type:"reviewing",description:"R√©vision et consolidation",effectiveness:3,context:"Renforcement des connaissances"}),t}containsSemanticEquivalent(e,t){return({"connaissances pr√©alables":["ce que je sais","mes acquis","baggage","exp√©rience"],"objectifs d'apprentissage":["but","goal","objectif","viser","atteindre"],strat√©gies:["m√©thode","approche","technique","fa√ßon de faire"],"gestion du temps":["temps","dur√©e","horaire","planning"],compr√©hension:["comprendre","saisir","clair","√©vident"],"auto-√©valuation":["me juger","√©valuer mes","bilan personnel"]}[t]||[]).some(i=>e.includes(i))}}class Bs{selectPrompt(e,t,s=[]){let n=xt.filter(r=>r.trigger===e);if(n=n.filter(r=>!s.includes(r.id)),t){const r=n.filter(a=>a.competence_focus===t);r.length>0&&(n=r)}if(n.length===0)return null;const i=Math.floor(Math.random()*n.length);return n[i]}getPromptsByType(e){return xt.filter(t=>t.type===e)}getPromptsByTrigger(e){return xt.filter(t=>t.trigger===e)}}class Hs{constructor(){ee(this,"promptBank");ee(this,"analyzer");ee(this,"sessionId");ee(this,"userId","");this.promptBank=new Bs,this.analyzer=new Os,this.sessionId=this.generateSessionId()}generatePromptsForLevel(e,t){return["Quelle strat√©gie avez-vous utilis√©e pour aborder ce probl√®me ?","Qu'est-ce qui vous a sembl√© le plus difficile ?","Comment √©valuez-vous votre confiance dans vos r√©ponses ?"].map((n,i)=>({id:`${e}-${t}-${i}`,type:"reflection",trigger:"during_lesson",question:this.adaptPromptToLevel(n,e),sub_questions:[],guidance:"R√©fl√©chissez attentivement √† votre processus d'apprentissage",expected_elements:["strat√©gie","difficult√©","confiance"],competence_focus:t}))}analyzeReflection(e){const t=this.identifyStrategies(e),s=this.evaluateAwarenessLevel(e);return{strategies:t,awarenessLevel:s,recommendations:this.generateTestRecommendations(t,s)}}identifyStrategies(e){const t=[];for(const s of e){if(!s.response)continue;const n=s.response.toLowerCase();(n.includes("r√©p√©t")||n.includes("relis")||n.includes("revoi"))&&t.push("R√©p√©tition"),(n.includes("sch√©ma")||n.includes("diagram")||n.includes("visualis"))&&t.push("Visualisation"),(n.includes("r√©sum√©")||n.includes("synth√®s")||n.includes("plan"))&&t.push("Organisation"),(n.includes("exemple")||n.includes("analogie")||n.includes("compar"))&&t.push("Elaboration"),(n.includes("v√©rifie")||n.includes("test")||n.includes("contr√¥l"))&&t.push("Autor√©gulation")}return[...new Set(t)]}evaluateAwarenessLevel(e){let t=0;const s=e.length;for(const i of e){if(!i.response)continue;const r=i.response.toLowerCase();r.split(" ").length>20&&(t+=1),(r.includes("parce que")||r.includes("car")||r.includes("donc"))&&(t+=1),(r.includes("strat√©gie")||r.includes("m√©thode")||r.includes("approche"))&&(t+=1),(r.includes("difficile")||r.includes("facile")||r.includes("compris"))&&(t+=1)}const n=s>0?t/(s*4):0;return n>.7?"√âlev√©":n>.4?"Moyen":"Faible"}generateTestRecommendations(e,t){const s=[];return t==="Faible"&&(s.push("Pratiquez l'autor√©flexion r√©guli√®rement"),s.push("Posez-vous des questions sur votre processus d'apprentissage")),e.length<2&&s.push("Diversifiez vos strat√©gies d'apprentissage"),e.includes("Autor√©gulation")||s.push("D√©veloppez vos capacit√©s d'autocontr√¥le et de v√©rification"),s}getCategoryForLevel(e){switch(e){case"beginner":return"D√©couverte";case"intermediate":return"Approfondissement";case"advanced":return"Ma√Ætrise";default:return"R√©flexion"}}adaptPromptToLevel(e,t){return t==="beginner"?e.replace(/complexe|avanc√©|sophistiqu√©/g,"simple"):t==="advanced"?e+" Analysez en d√©tail vos processus cognitifs.":e}startSession(e){this.userId=e,this.sessionId=this.generateSessionId(),vt.set("idle"),console.log(`üß† Session m√©tacognition d√©marr√©e pour ${e}`)}triggerPrompt(e,t){const n=oe(yt).slice(-3).map(r=>r.prompt_id),i=this.promptBank.selectPrompt(e,t,n);return i&&(zt.set(i),vt.set("prompting"),console.log(`üí≠ Prompt d√©clench√©: ${i.question}`)),i}async submitResponse(e,t){const s=xt.find(r=>r.id===t);if(!s){console.error("Prompt non trouv√©:",t);return}vt.set("analyzing");const n={prompt_id:t,user_id:this.userId,session_id:this.sessionId,content:e.trim(),timestamp:new Date,word_count:e.trim().split(/\s+/).length,reflection_depth:this.calculateReflectionDepth(e),keywords_identified:this.extractKeywords(e),metacognitive_strategies:this.analyzer.identifyStrategies(e)},i=this.analyzer.analyzeResponseQuality(n,s);rs.set(i),yt.update(r=>[...r,n]),await new Promise(r=>setTimeout(r,800)),vt.set("completed"),zt.set(null),console.log(`‚úÖ R√©ponse analys√©e - Qualit√©: ${i}/100`)}calculateReflectionDepth(e){const t=e.toLowerCase();let s=1;const n=[["parce que","car","donc"],["cependant","mais","n√©anmoins"],["par exemple","notamment"],["je pense que","il me semble"],["cela me rappelle","je fais le lien"]];for(const i of n)i.some(r=>t.includes(r))&&s++;return Math.min(5,s)}extractKeywords(e){const t=[],s=e.toLowerCase(),n=["apprendre","comprendre","m√©moriser","r√©viser","strat√©gie","m√©thode","technique","approche","objectif","but","goal","cible","difficile","facile","complexe","simple","temps","dur√©e","rythme","vitesse","erreur","faute","probl√®me","obstacle","r√©ussir","√©chouer","progression","am√©lioration"];for(const i of n)s.includes(i)&&t.push(i);return[...new Set(t)]}generateAnalysisReport(){const e=oe(yt);if(e.length===0)return{totalResponses:0,averageQuality:0,strategiesUsed:[],reflectionTrend:[],recommendations:[]};const t=e.map(d=>{const _=xt.find(c=>c.id===d.prompt_id);return _?this.analyzer.analyzeResponseQuality(d,_):0}),s=t.reduce((d,_)=>d+_,0)/t.length,n=e.flatMap(d=>d.metacognitive_strategies),i=[...new Set(n.map(d=>d.type))],r=e.map(d=>d.reflection_depth),a=this.generateRecommendations(e,s);return{totalResponses:e.length,averageQuality:Math.round(s),strategiesUsed:i,reflectionTrend:r,recommendations:a,sessionId:this.sessionId}}generateRecommendations(e,t){const s=[];t<50&&(s.push("Essayez d'√™tre plus d√©taill√© dans vos r√©flexions"),s.push("Prenez plus de temps pour analyser vos processus d'apprentissage")),t>=50&&t<75&&(s.push("Continuez √† d√©velopper vos r√©flexions m√©tacognitives"),s.push("Essayez d'identifier plus de strat√©gies d'apprentissage")),t>=75&&(s.push("Excellente qualit√© de r√©flexion ! Maintenez cette approche"),s.push("Partagez vos strat√©gies avec d'autres apprenants"));const n=new Set(e.flatMap(i=>i.metacognitive_strategies.map(r=>r.type)));return n.has("planning")||s.push("Pensez √† planifier davantage vos sessions d'apprentissage"),n.has("monitoring")||s.push("Surveillez plus r√©guli√®rement votre compr√©hension pendant l'apprentissage"),n.has("evaluating")||s.push("Prenez du temps pour √©valuer vos acquis apr√®s chaque session"),s}generateSessionId(){return`metacog_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}reset(){zt.set(null),yt.set([]),vt.set("idle"),rs.set(0),this.sessionId=this.generateSessionId(),this.userId=""}}function Us(o){var i;if(o.length===0)return null;const e=o.flatMap(r=>r.metacognitive_strategies),t={};for(const r of e)t[r.type]=(t[r.type]||0)+1;const s=((i=Object.entries(t).sort(([,r],[,a])=>a-r)[0])==null?void 0:i[0])||"none",n=e.length>0?e.reduce((r,a)=>r+a.effectiveness,0)/e.length:0;return{totalStrategies:e.length,uniqueStrategies:Object.keys(t).length,dominantStrategy:s,strategyDistribution:t,averageEffectiveness:Math.round(n*100)/100}}new Hs;const De=xe(null),at=xe(null),St=xe([]),ct=xe(0),Fs=Ft([De,at,ct],([o,e,t])=>({isActive:o!==null,currentQuestion:e,progress:t,isComplete:t>=100})),Gs={minQuestions:5,maxQuestions:15,targetAccuracy:.8,adaptiveThreshold:.3,timeoutPerQuestion:18e4,difficultyProgression:[1,2,2,3,3,3,4,4,5]},Ke=class Ke{constructor(){ee(this,"difficultyHistory",[]);ee(this,"accuracyHistory",[])}static getInstance(){return Ke.instance||(Ke.instance=new Ke),Ke.instance}calculateNextDifficulty(e,t){var c;if(e.length===0)return 2;const s=e.slice(-3),n=t.slice(-3),i=this.calculateAccuracy(s,n);this.calculateAccuracy(e,t);const r=this.calculateTimeFactor(s);let a=0;i>.8&&r>.7?a=1:i>.6&&r>.5?a=.5:i<.4||r<.3?a=-1:i<.6&&(a=-.5);const d=((c=t[t.length-1])==null?void 0:c.difficulty)||2,_=Math.max(1,Math.min(5,d+a));return this.smoothDifficultyTransition(_,d)}calculateAccuracy(e,t){if(e.length===0)return 0;let s=0;return e.forEach((n,i)=>{const r=t[i];r&&this.isCorrectAnswer(n.answer,r.correct_answer)&&s++}),s/e.length}calculateTimeFactor(e){if(e.length===0)return 1;const t=e.reduce((n,i)=>n+i.time_taken,0)/e.length,s=6e4;return t<=s?Math.min(1,t/s):Math.max(.2,s/t)}smoothDifficultyTransition(e,t){const n=e-t;return Math.abs(n)<=1?Math.round(e):t+(n>0?1:-1)}isCorrectAnswer(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:e.every((s,n)=>s===t[n]):typeof e=="string"&&typeof t=="string"?e.toLowerCase().trim()===t.toLowerCase().trim():!1}determineCompetenceLevel(e){const{percentage:t,adjusted_score:s}=e.score,n=e.questions.reduce((i,r)=>i+r.difficulty,0)/e.questions.length;return t>=80&&n>=4?"expert":t>=70&&n>=3?"advanced":t>=60&&n>=2?"intermediate":"beginner"}};ee(Ke,"instance");let jt=Ke;const We=class We{constructor(){ee(this,"questionBank",new Map)}static getInstance(){return We.instance||(We.instance=new We),We.instance}generateQuestion(e,t,s=[]){const i=this.getQuestionsForCompetence(e).filter(a=>Math.abs(a.difficulty-t)<=1&&!s.includes(a.id));if(i.length===0)return null;const r=i.map(a=>({question:a,weight:1-Math.abs(a.difficulty-t)*.2}));return this.selectWeightedRandom(r)}selectWeightedRandom(e){const t=e.reduce((n,i)=>n+i.weight,0);let s=Math.random()*t;for(const n of e)if(s-=n.weight,s<=0)return n.question;return e[0].question}getQuestionsForCompetence(e){return this.generateMockQuestions(e)}generateMockQuestions(e){return[{id:`${e}_q1`,type:"multiple_choice",competence:e,difficulty:1,question:"Quelle est la valeur de 5 + 3 ?",options:["6","7","8","9"],correct_answer:"8",explanation:"5 + 3 = 8, c'est une addition simple.",skill_indicators:["addition_simple"]},{id:`${e}_q2`,type:"multiple_choice",competence:e,difficulty:2,question:"Combien fait 15 √ó 4 ?",options:["45","50","60","65"],correct_answer:"60",explanation:"15 √ó 4 = 60. On peut calculer 15 √ó 4 = (10 + 5) √ó 4 = 40 + 20 = 60.",skill_indicators:["multiplication","decomposition"]},{id:`${e}_q3`,type:"multiple_choice",competence:e,difficulty:3,question:"Quelle est la fraction √©quivalente √† 3/6 ?",options:["1/2","2/3","1/3","3/4"],correct_answer:"1/2",explanation:"3/6 peut √™tre simplifi√©e en divisant le num√©rateur et le d√©nominateur par 3 : 3√∑3 = 1 et 6√∑3 = 2, donc 1/2.",skill_indicators:["fractions","simplification"]},{id:`${e}_q4`,type:"multiple_choice",competence:e,difficulty:4,question:"R√©solvez l'√©quation : 2x + 5 = 13",options:["x = 3","x = 4","x = 5","x = 6"],correct_answer:"x = 4",explanation:"2x + 5 = 13 ‚Üí 2x = 13 - 5 ‚Üí 2x = 8 ‚Üí x = 4",skill_indicators:["equation_lineaire","algebra"]},{id:`${e}_q5`,type:"multiple_choice",competence:e,difficulty:5,question:"Quelle est la d√©riv√©e de f(x) = x¬≥ + 2x¬≤ - 5x + 3 ?",options:["3x¬≤ + 4x - 5","x¬≤ + 4x - 5","3x¬≤ + 2x - 5","3x¬≤ + 4x + 5"],correct_answer:"3x¬≤ + 4x - 5",explanation:"La d√©riv√©e de x¬≥ est 3x¬≤, de 2x¬≤ est 4x, de -5x est -5, et la d√©riv√©e d'une constante est 0.",skill_indicators:["derivation","polynomes","calcul_differentiel"]}]}};ee(We,"instance");let Nt=We;const Ye=class Ye{constructor(){ee(this,"adaptiveAlgorithm");ee(this,"questionGenerator");ee(this,"config");this.adaptiveAlgorithm=jt.getInstance(),this.questionGenerator=Nt.getInstance(),this.config=Gs}static getInstance(){return Ye.instance||(Ye.instance=new Ye),Ye.instance}async startPreEvaluation(e,t){const s=this.generateSessionId(),n={user_id:e,competence:t,session_id:s,start_time:new Date,end_time:new Date,total_duration:0,questions:[],responses:[],score:{raw_score:0,percentage:0,adjusted_score:0,competence_level:"beginner"},analytics:{average_time_per_question:0,confidence_correlation:0,difficulty_progression:[],recommendations:[]},adaptive_path:this.createInitialLearningPath(t)};De.set(n),St.set([]),ct.set(0),await this.generateNextQuestion()}async submitResponse(e,t,s){const n=oe(De),i=oe(at);if(!n||!i)throw new Error("No active evaluation or question");const r={question_id:i.id,answer:e,time_taken:t,timestamp:new Date,confidence_level:s},a=oe(St);a.push(r),St.set(a),n.responses=a,n.questions.push(i);const d=Math.min(100,a.length/this.config.maxQuestions*100);ct.set(d),await this.shouldContinueEvaluation()?await this.generateNextQuestion():await this.completeEvaluation()}async generateNextQuestion(){const e=oe(De);if(!e)return;const t=this.adaptiveAlgorithm.calculateNextDifficulty(e.responses,e.questions),s=e.questions.map(i=>i.id),n=this.questionGenerator.generateQuestion(e.competence,t,s);n?at.set(n):await this.completeEvaluation()}async shouldContinueEvaluation(){const e=oe(De);if(!e)return!1;const t=e.responses.length;if(t<this.config.minQuestions)return!0;if(t>=this.config.maxQuestions)return!1;const s=this.calculateRecentAccuracy(e);return!(t>=8&&s>=this.config.targetAccuracy)}calculateRecentAccuracy(e){const t=Math.min(5,e.responses.length);if(t===0)return 0;const s=e.responses.slice(-t),n=e.questions.slice(-t);let i=0;return s.forEach((r,a)=>{const d=n[a];this.isCorrectAnswer(r.answer,d.correct_answer)&&i++}),i/t}async completeEvaluation(){const e=oe(De);e&&(e.end_time=new Date,e.total_duration=e.end_time.getTime()-e.start_time.getTime(),this.calculateScores(e),this.generateAnalytics(e),e.adaptive_path=this.createAdaptiveLearningPath(e),at.set(null),ct.set(100),De.set(e),console.log("Pr√©-√©valuation compl√©t√©e:",e))}calculateScores(e){const t=e.questions.length;if(t===0)return;let s=0,n=0,i=0;e.responses.forEach((r,a)=>{const d=e.questions[a];this.isCorrectAnswer(r.answer,d.correct_answer)&&(s++,n+=d.difficulty),i+=d.difficulty}),e.score={raw_score:s,percentage:s/t*100,adjusted_score:i>0?n/i*100:0,competence_level:this.adaptiveAlgorithm.determineCompetenceLevel(e)}}generateAnalytics(e){const t=e.responses,s=e.questions;if(t.length===0)return;const n=t.reduce((d,_)=>d+_.time_taken,0)/t.length,i=this.calculateConfidenceCorrelation(t,s),r=s.map(d=>d.difficulty),a=this.generateRecommendations(e);e.analytics={average_time_per_question:n,confidence_correlation:i,difficulty_progression:r,recommendations:a}}calculateConfidenceCorrelation(e,t){const s=e.map((c,f)=>({confidence:c.confidence_level||3,correct:this.isCorrectAnswer(c.answer,t[f].correct_answer)?1:0})).filter(c=>c.confidence!==void 0);if(s.length<3)return 0;const n=s.reduce((c,f)=>c+f.confidence,0)/s.length,i=s.reduce((c,f)=>c+f.correct,0)/s.length;let r=0,a=0,d=0;s.forEach(c=>{const f=c.confidence-n,v=c.correct-i;r+=f*v,a+=f*f,d+=v*v});const _=Math.sqrt(a*d);return _===0?0:r/_}generateRecommendations(e){const t=[],s=e.score;return s.percentage<50?(t.push("Commencer par les concepts fondamentaux"),t.push("Utiliser des ressources visuelles et interactives")):s.percentage<70?(t.push("Renforcer les bases avec des exercices cibl√©s"),t.push("Pratiquer r√©guli√®rement pour consolider")):s.percentage<85?(t.push("Approfondir avec des d√©fis plus complexes"),t.push("Explorer les applications concr√®tes")):(t.push("Passer aux concepts avanc√©s"),t.push("Mentorer d'autres apprenants")),e.analytics.average_time_per_question>12e4&&t.push("Travailler la rapidit√© de calcul"),e.analytics.confidence_correlation<.3&&t.push("D√©velopper l'auto-√©valuation et la m√©tacognition"),t}createInitialLearningPath(e){return{user_id:"",competence:e,current_level:"beginner",target_level:"intermediate",estimated_completion_time:20,learning_style:{visual:50,auditory:25,kinesthetic:15,reading_writing:10,dominant_style:"visual",learning_pace:"normal",attention_span:"medium",complexity_preference:"simple"},recommended_resources:[],milestones:[],adaptation_triggers:[],personalization_factors:[]}}createAdaptiveLearningPath(e){const t=this.createInitialLearningPath(e.competence);return t.user_id=e.user_id,t.current_level=e.score.competence_level,t}isCorrectAnswer(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:e.every((s,n)=>s===t[n]):typeof e=="string"&&typeof t=="string"?e.toLowerCase().trim()===t.toLowerCase().trim():!1}generateSessionId(){return`preeval_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}getCurrentEvaluation(){return oe(De)}resetEvaluation(){De.set(null),at.set(null),St.set([]),ct.set(0)}};ee(Ye,"instance");let Ot=Ye;const Pt=Ot.getInstance();function os(o,e,t){const s=o.slice();return s[32]=e[t],s}function ls(o,e,t){const s=o.slice();return s[35]=e[t],s}function as(o,e,t){const s=o.slice();return s[35]=e[t],s[37]=t,s}function Js(o){let e,t='<div class="text-gray-600"><svg class="w-16 h-16 mx-auto mb-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <p class="text-lg">Pr√©paration de votre prochaine question...</p></div>',s,n;return{c(){e=m("div"),e.innerHTML=t,this.h()},l(i){e=h(i,"DIV",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-18c17pu"&&(e.innerHTML=t),this.h()},h(){u(e,"class","waiting-state text-center py-12")},m(i,r){Z(i,e,r),n=!0},p:ut,i(i){n||(i&&At(()=>{n&&(s||(s=ft(e,Rt,{},!0)),s.run(1))}),n=!0)},o(i){i&&(s||(s=ft(e,Rt,{},!1)),s.run(0)),n=!1},d(i){i&&g(e),i&&s&&s.end()}}}function Ks(o){let e,t,s,n,i,r=o[2].difficulty+"",a,d,_,c,f,v=o[2].type==="multiple_choice"?"QCM":o[2].type==="true_false"?"Vrai/Faux":"Question ouverte",I,x,C,p,b,M,T,E,w=hs(o[6])+"",q,U,$,L,G,P=o[2].question+"",z,N,B,W,Y,D,le,ce,de,He,fe,Ce,we,pe,se="Arr√™ter l'√©valuation",Ee,me,Te=o[4]?"Validation...":"Valider ma r√©ponse",he,Qe,ge,Se,pt;function $e(Q,O){if(Q[9]&&Q[2].options)return Xs;if(Q[8])return Ys}let ve=$e(o),X=ve&&ve(o),F=o[5]&&ps(o);return{c(){e=m("div"),t=m("div"),s=m("div"),n=m("span"),i=V("Niveau "),a=V(r),d=V("/5"),c=k(),f=m("span"),I=V(v),x=k(),C=m("div"),p=qt("svg"),b=qt("path"),T=k(),E=m("span"),q=V(w),$=k(),L=m("div"),G=m("h3"),z=V(P),N=k(),B=m("div"),X&&X.c(),W=k(),Y=m("div"),D=m("button"),le=qt("svg"),ce=qt("path"),He=V(`\r
					Indiquer votre niveau de confiance (optionnel)`),fe=k(),F&&F.c(),Ce=k(),we=m("div"),pe=m("button"),pe.textContent=se,Ee=k(),me=m("button"),he=V(Te),this.h()},l(Q){e=h(Q,"DIV",{class:!0});var O=y(e);t=h(O,"DIV",{class:!0});var ze=y(t);s=h(ze,"DIV",{class:!0});var _e=y(s);n=h(_e,"SPAN",{class:!0});var Le=y(n);i=j(Le,"Niveau "),a=j(Le,r),d=j(Le,"/5"),Le.forEach(g),c=S(_e),f=h(_e,"SPAN",{class:!0});var qe=y(f);I=j(qe,v),qe.forEach(g),_e.forEach(g),x=S(ze),C=h(ze,"DIV",{class:!0});var be=y(C);p=It(be,"svg",{class:!0,fill:!0,viewBox:!0});var mt=y(p);b=It(mt,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),y(b).forEach(g),mt.forEach(g),T=S(be),E=h(be,"SPAN",{class:!0});var et=y(E);q=j(et,w),et.forEach(g),be.forEach(g),ze.forEach(g),$=S(O),L=h(O,"DIV",{class:!0});var ye=y(L);G=h(ye,"H3",{class:!0});var Re=y(G);z=j(Re,P),Re.forEach(g),N=S(ye),B=h(ye,"DIV",{class:!0});var ht=y(B);X&&X.l(ht),ht.forEach(g),ye.forEach(g),W=S(O),Y=h(O,"DIV",{class:!0});var Ve=y(Y);D=h(Ve,"BUTTON",{class:!0});var Pe=y(D);le=It(Pe,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var je=y(le);ce=It(je,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(ce).forEach(g),je.forEach(g),He=j(Pe,`\r
					Indiquer votre niveau de confiance (optionnel)`),Pe.forEach(g),fe=S(Ve),F&&F.l(Ve),Ve.forEach(g),Ce=S(O),we=h(O,"DIV",{class:!0});var Ae=y(we);pe=h(Ae,"BUTTON",{class:!0,"data-svelte-h":!0}),H(pe)!=="svelte-pl0yqc"&&(pe.textContent=se),Ee=S(Ae),me=h(Ae,"BUTTON",{class:!0});var tt=y(me);he=j(tt,Te),tt.forEach(g),Ae.forEach(g),O.forEach(g),this.h()},h(){u(n,"class",_="difficulty-badge px-3 py-1 rounded-full text-sm font-medium "+(o[2].difficulty<=2?"bg-green-100 text-green-800":o[2].difficulty<=3?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800")),u(f,"class","text-sm text-gray-600"),u(s,"class","flex items-center space-x-4"),u(b,"fill-rule","evenodd"),u(b,"d","M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"),u(b,"clip-rule","evenodd"),u(p,"class",M="w-5 h-5 "+Mt(o[6])+" svelte-1dspto9"),u(p,"fill","currentColor"),u(p,"viewBox","0 0 20 20"),u(E,"class",U="font-mono "+Mt(o[6])+" svelte-1dspto9"),u(C,"class","timer flex items-center space-x-2"),u(t,"class","question-meta flex justify-between items-center mb-6 p-4 bg-gray-50 rounded-lg svelte-1dspto9"),u(G,"class","text-xl font-semibold text-gray-800 mb-6 leading-relaxed"),u(B,"class","answers-container space-y-3"),u(L,"class","question-content mb-8"),u(ce,"stroke-linecap","round"),u(ce,"stroke-linejoin","round"),u(ce,"stroke-width","2"),u(ce,"d",de=o[5]?"M19 9l-7 7-7-7":"M9 5l7 7-7 7"),u(le,"class","w-4 h-4 mr-2"),u(le,"fill","none"),u(le,"stroke","currentColor"),u(le,"viewBox","0 0 24 24"),u(D,"class","confidence-toggle flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors"),u(Y,"class","confidence-section mb-6"),u(pe,"class","cancel-btn px-6 py-3 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors svelte-1dspto9"),me.disabled=Qe=!o[7]||o[4],u(me,"class","submit-btn px-8 py-3 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors svelte-1dspto9"),u(we,"class","actions flex justify-between items-center svelte-1dspto9"),u(e,"class","question-container svelte-1dspto9")},m(Q,O){Z(Q,e,O),l(e,t),l(t,s),l(s,n),l(n,i),l(n,a),l(n,d),l(s,c),l(s,f),l(f,I),l(t,x),l(t,C),l(C,p),l(p,b),l(C,T),l(C,E),l(E,q),l(e,$),l(e,L),l(L,G),l(G,z),l(L,N),l(L,B),X&&X.m(B,null),l(e,W),l(e,Y),l(Y,D),l(D,le),l(le,ce),l(D,He),l(Y,fe),F&&F.m(Y,null),l(e,Ce),l(e,we),l(we,pe),l(we,Ee),l(we,me),l(me,he),Se||(pt=[Me(D,"click",o[12]),Me(pe,"click",o[13]),Me(me,"click",o[11])],Se=!0)},p(Q,O){O[0]&4&&r!==(r=Q[2].difficulty+"")&&te(a,r),O[0]&4&&_!==(_="difficulty-badge px-3 py-1 rounded-full text-sm font-medium "+(Q[2].difficulty<=2?"bg-green-100 text-green-800":Q[2].difficulty<=3?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"))&&u(n,"class",_),O[0]&4&&v!==(v=Q[2].type==="multiple_choice"?"QCM":Q[2].type==="true_false"?"Vrai/Faux":"Question ouverte")&&te(I,v),O[0]&64&&M!==(M="w-5 h-5 "+Mt(Q[6])+" svelte-1dspto9")&&u(p,"class",M),O[0]&64&&w!==(w=hs(Q[6])+"")&&te(q,w),O[0]&64&&U!==(U="font-mono "+Mt(Q[6])+" svelte-1dspto9")&&u(E,"class",U),O[0]&4&&P!==(P=Q[2].question+"")&&te(z,P),ve===(ve=$e(Q))&&X?X.p(Q,O):(X&&X.d(1),X=ve&&ve(Q),X&&(X.c(),X.m(B,null))),O[0]&32&&de!==(de=Q[5]?"M19 9l-7 7-7-7":"M9 5l7 7-7 7")&&u(ce,"d",de),Q[5]?F?(F.p(Q,O),O[0]&32&&Be(F,1)):(F=ps(Q),F.c(),Be(F,1),F.m(Y,null)):F&&(Ht(),Ze(F,1,1,()=>{F=null}),Ut()),O[0]&16&&Te!==(Te=Q[4]?"Validation...":"Valider ma r√©ponse")&&te(he,Te),O[0]&144&&Qe!==(Qe=!Q[7]||Q[4])&&(me.disabled=Qe)},i(Q){Be(F),Q&&(ge||At(()=>{ge=Ds(e,Lt,{duration:300}),ge.start()}))},o(Q){Ze(F)},d(Q){Q&&g(e),X&&X.d(),F&&F.d(),Se=!1,Rs(pt)}}}function Ws(o){let e,t='<div class="text-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"></div> <p class="text-gray-600">Pr√©paration de votre √©valuation...</p></div>',s,n;return{c(){e=m("div"),e.innerHTML=t,this.h()},l(i){e=h(i,"DIV",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-4mtgtp"&&(e.innerHTML=t),this.h()},h(){u(e,"class","loading-state flex items-center justify-center py-12")},m(i,r){Z(i,e,r),n=!0},p:ut,i(i){n||(i&&At(()=>{n&&(s||(s=ft(e,Rt,{},!0)),s.run(1))}),n=!0)},o(i){i&&(s||(s=ft(e,Rt,{},!1)),s.run(0)),n=!1},d(i){i&&g(e),i&&s&&s.end()}}}function Ys(o){let e,t=ae(["Vrai","Faux"]),s=[];for(let n=0;n<2;n+=1)s[n]=us(ls(o,t,n));return{c(){for(let n=0;n<2;n+=1)s[n].c();e=Tt()},l(n){for(let i=0;i<2;i+=1)s[i].l(n);e=Tt()},m(n,i){for(let r=0;r<2;r+=1)s[r]&&s[r].m(n,i);Z(n,e,i)},p(n,i){if(i[0]&2){t=ae(["Vrai","Faux"]);let r;for(r=0;r<2;r+=1){const a=ls(n,t,r);s[r]?s[r].p(a,i):(s[r]=us(a),s[r].c(),s[r].m(e.parentNode,e))}for(;r<2;r+=1)s[r].d(1)}},d(n){n&&g(e),Xe(s,n)}}}function Xs(o){let e,t=ae(o[2].options),s=[];for(let n=0;n<t.length;n+=1)s[n]=fs(as(o,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Tt()},l(n){for(let i=0;i<s.length;i+=1)s[i].l(n);e=Tt()},m(n,i){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(n,i);Z(n,e,i)},p(n,i){if(i[0]&6){t=ae(n[2].options);let r;for(r=0;r<t.length;r+=1){const a=as(n,t,r);s[r]?s[r].p(a,i):(s[r]=fs(a),s[r].c(),s[r].m(e.parentNode,e))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(n){n&&g(e),Xe(s,n)}}}function cs(o){let e;return{c(){e=m("div"),this.h()},l(t){e=h(t,"DIV",{class:!0}),y(e).forEach(g),this.h()},h(){u(e,"class","w-2 h-2 bg-white rounded-full")},m(t,s){Z(t,e,s)},d(t){t&&g(e)}}}function us(o){let e,t,s,n,i,r,a,d,_,c,f,v,I,x=o[1]===o[35]&&cs();return f=Bt(o[21][1]),{c(){e=m("label"),t=m("input"),s=k(),n=m("div"),x&&x.c(),r=k(),a=m("span"),d=V(o[35]),_=k(),this.h()},l(C){e=h(C,"LABEL",{class:!0});var p=y(e);t=h(p,"INPUT",{type:!0,name:!0,class:!0}),s=S(p),n=h(p,"DIV",{class:!0});var b=y(n);x&&x.l(b),b.forEach(g),r=S(p),a=h(p,"SPAN",{class:!0});var M=y(a);d=j(M,o[35]),M.forEach(g),_=S(p),p.forEach(g),this.h()},h(){u(t,"type","radio"),u(t,"name","answer"),t.__value=o[35],dt(t,t.__value),u(t,"class","sr-only"),u(n,"class",i="option-indicator w-5 h-5 border-2 rounded-full mr-3 flex items-center justify-center "+(o[1]===o[35]?"border-blue-500 bg-blue-500":"border-gray-300")),u(a,"class","option-text text-gray-700 font-medium"),u(e,"class",c="answer-option flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all "+(o[1]===o[35]?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50")+" svelte-1dspto9"),f.p(t)},m(C,p){Z(C,e,p),l(e,t),t.checked=t.__value===o[1],l(e,s),l(e,n),x&&x.m(n,null),l(e,r),l(e,a),l(a,d),l(e,_),v||(I=Me(t,"change",o[22]),v=!0)},p(C,p){p[0]&6&&(t.checked=t.__value===C[1]),C[1]===C[35]?x||(x=cs(),x.c(),x.m(n,null)):x&&(x.d(1),x=null),p[0]&2&&i!==(i="option-indicator w-5 h-5 border-2 rounded-full mr-3 flex items-center justify-center "+(C[1]===C[35]?"border-blue-500 bg-blue-500":"border-gray-300"))&&u(n,"class",i),p[0]&2&&c!==(c="answer-option flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all "+(C[1]===C[35]?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50")+" svelte-1dspto9")&&u(e,"class",c)},d(C){C&&g(e),x&&x.d(),f.r(),v=!1,I()}}}function ds(o){let e;return{c(){e=m("div"),this.h()},l(t){e=h(t,"DIV",{class:!0}),y(e).forEach(g),this.h()},h(){u(e,"class","w-2 h-2 bg-white rounded-full")},m(t,s){Z(t,e,s)},d(t){t&&g(e)}}}function fs(o){let e,t,s,n=!1,i,r,a,d,_,c=String.fromCharCode(65+o[37])+"",f,v,I=o[35]+"",x,C,p,b,M,T,E=o[1]===o[35]&&ds();return b=Bt(o[21][1]),{c(){e=m("label"),t=m("input"),i=k(),r=m("div"),E&&E.c(),d=k(),_=m("span"),f=V(c),v=V(". "),x=V(I),C=k(),this.h()},l(w){e=h(w,"LABEL",{class:!0});var q=y(e);t=h(q,"INPUT",{type:!0,name:!0,class:!0}),i=S(q),r=h(q,"DIV",{class:!0});var U=y(r);E&&E.l(U),U.forEach(g),d=S(q),_=h(q,"SPAN",{class:!0});var $=y(_);f=j($,c),v=j($,". "),x=j($,I),$.forEach(g),C=S(q),q.forEach(g),this.h()},h(){u(t,"type","radio"),u(t,"name","answer"),t.__value=s=o[35],dt(t,t.__value),u(t,"class","sr-only"),u(r,"class",a="option-indicator w-5 h-5 border-2 rounded-full mr-3 flex items-center justify-center "+(o[1]===o[35]?"border-blue-500 bg-blue-500":"border-gray-300")),u(_,"class","option-text text-gray-700 font-medium"),u(e,"class",p="answer-option flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all "+(o[1]===o[35]?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50")+" svelte-1dspto9"),b.p(t)},m(w,q){Z(w,e,q),l(e,t),t.checked=t.__value===o[1],l(e,i),l(e,r),E&&E.m(r,null),l(e,d),l(e,_),l(_,f),l(_,v),l(_,x),l(e,C),M||(T=Me(t,"change",o[20]),M=!0)},p(w,q){q[0]&4&&s!==(s=w[35])&&(t.__value=s,dt(t,t.__value),n=!0),(n||q[0]&6)&&(t.checked=t.__value===w[1]),w[1]===w[35]?E||(E=ds(),E.c(),E.m(r,null)):E&&(E.d(1),E=null),q[0]&6&&a!==(a="option-indicator w-5 h-5 border-2 rounded-full mr-3 flex items-center justify-center "+(w[1]===w[35]?"border-blue-500 bg-blue-500":"border-gray-300"))&&u(r,"class",a),q[0]&4&&I!==(I=w[35]+"")&&te(x,I),q[0]&6&&p!==(p="answer-option flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all "+(w[1]===w[35]?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50")+" svelte-1dspto9")&&u(e,"class",p)},d(w){w&&g(e),E&&E.d(),b.r(),M=!1,T()}}}function ps(o){let e,t,s="√Ä quel point √™tes-vous s√ªr(e) de votre r√©ponse ?",n,i,r,a,d=ae([1,2,3,4,5]),_=[];for(let c=0;c<5;c+=1)_[c]=ms(os(o,d,c));return{c(){e=m("div"),t=m("p"),t.textContent=s,n=k(),i=m("div");for(let c=0;c<5;c+=1)_[c].c();this.h()},l(c){e=h(c,"DIV",{class:!0});var f=y(e);t=h(f,"P",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-14z4ocn"&&(t.textContent=s),n=S(f),i=h(f,"DIV",{class:!0});var v=y(i);for(let I=0;I<5;I+=1)_[I].l(v);v.forEach(g),f.forEach(g),this.h()},h(){u(t,"class","text-sm text-gray-600 mb-3"),u(i,"class","confidence-options flex space-x-2 svelte-1dspto9"),u(e,"class","confidence-selector mt-3 p-4 bg-gray-50 rounded-lg")},m(c,f){Z(c,e,f),l(e,t),l(e,n),l(e,i);for(let v=0;v<5;v+=1)_[v]&&_[v].m(i,null);a=!0},p(c,f){if(f[0]&8){d=ae([1,2,3,4,5]);let v;for(v=0;v<5;v+=1){const I=os(c,d,v);_[v]?_[v].p(I,f):(_[v]=ms(I),_[v].c(),_[v].m(i,null))}for(;v<5;v+=1)_[v].d(1)}},i(c){a||(c&&At(()=>{a&&(r||(r=ft(e,Lt,{},!0)),r.run(1))}),a=!0)},o(c){c&&(r||(r=ft(e,Lt,{},!1)),r.run(0)),a=!1},d(c){c&&g(e),Xe(_,c),c&&r&&r.end()}}}function ms(o){let e,t,s,n,i,r,a,d,_=o[32]===1?"Pas s√ªr":o[32]===2?"Peu s√ªr":o[32]===3?"Moyen":o[32]===4?"Assez s√ªr":"Tr√®s s√ªr",c,f,v,I,x,C;return I=Bt(o[21][0]),{c(){e=m("label"),t=m("input"),s=k(),n=m("div"),i=m("div"),r=V(o[32]),a=k(),d=m("div"),c=V(_),v=k(),this.h()},l(p){e=h(p,"LABEL",{class:!0});var b=y(e);t=h(b,"INPUT",{type:!0,name:!0,class:!0}),s=S(b),n=h(b,"DIV",{class:!0});var M=y(n);i=h(M,"DIV",{class:!0});var T=y(i);r=j(T,o[32]),T.forEach(g),a=S(M),d=h(M,"DIV",{class:!0});var E=y(d);c=j(E,_),E.forEach(g),M.forEach(g),v=S(b),b.forEach(g),this.h()},h(){u(t,"type","radio"),u(t,"name","confidence"),t.__value=o[32],dt(t,t.__value),u(t,"class","sr-only"),u(i,"class","text-xs font-semibold"),u(d,"class","text-xs"),u(n,"class",f="confidence-indicator p-2 border-2 rounded-lg cursor-pointer transition-all "+(o[3]===o[32]?"border-blue-500 bg-blue-500 text-white":"border-gray-300 text-gray-600 hover:border-gray-400")+" svelte-1dspto9"),u(e,"class","confidence-option flex-1 text-center"),I.p(t)},m(p,b){Z(p,e,b),l(e,t),t.checked=t.__value===o[3],l(e,s),l(e,n),l(n,i),l(i,r),l(n,a),l(n,d),l(d,c),l(e,v),x||(C=Me(t,"change",o[23]),x=!0)},p(p,b){b[0]&8&&(t.checked=t.__value===p[3]),b[0]&8&&f!==(f="confidence-indicator p-2 border-2 rounded-lg cursor-pointer transition-all "+(p[3]===p[32]?"border-blue-500 bg-blue-500 text-white":"border-gray-300 text-gray-600 hover:border-gray-400")+" svelte-1dspto9")&&u(n,"class",f)},d(p){p&&g(e),I.r(),x=!1,C()}}}function Zs(o){let e,t,s,n,i,r,a,d,_="Annuler",c,f,v,I,x,C,p=Math.round(o[10])+"",b,M,T,E,w,q,U;const $=[Ws,Ks,Js],L=[];function G(P,z){return P[4]?0:P[2]?1:2}return E=G(o),w=L[E]=$[E](o),{c(){e=m("div"),t=m("div"),s=m("div"),n=m("h2"),i=V("Pr√©-√©valuation : "),r=V(o[0]),a=k(),d=m("button"),d.textContent=_,c=k(),f=m("div"),v=m("div"),I=k(),x=m("div"),C=V("Progression : "),b=V(p),M=V("%"),T=k(),w.c(),this.h()},l(P){e=h(P,"DIV",{class:!0});var z=y(e);t=h(z,"DIV",{class:!0});var N=y(t);s=h(N,"DIV",{class:!0});var B=y(s);n=h(B,"H2",{class:!0});var W=y(n);i=j(W,"Pr√©-√©valuation : "),r=j(W,o[0]),W.forEach(g),a=S(B),d=h(B,"BUTTON",{class:!0,"data-svelte-h":!0}),H(d)!=="svelte-1dr7di9"&&(d.textContent=_),B.forEach(g),c=S(N),f=h(N,"DIV",{class:!0});var Y=y(f);v=h(Y,"DIV",{class:!0,style:!0}),y(v).forEach(g),Y.forEach(g),I=S(N),x=h(N,"DIV",{class:!0});var D=y(x);C=j(D,"Progression : "),b=j(D,p),M=j(D,"%"),D.forEach(g),N.forEach(g),T=S(z),w.l(z),z.forEach(g),this.h()},h(){u(n,"class","text-2xl font-bold text-gray-800"),u(d,"class","px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"),u(s,"class","flex justify-between items-center mb-4"),u(v,"class","progress-fill bg-blue-500 h-3 rounded-full transition-all duration-500 svelte-1dspto9"),is(v,"width",o[10]+"%"),u(f,"class","progress-bar bg-gray-200 rounded-full h-3 mb-2"),u(x,"class","text-sm text-gray-600 text-center"),u(t,"class","header mb-8"),u(e,"class","pre-evaluation-container max-w-4xl mx-auto p-6 bg-white rounded-xl shadow-lg svelte-1dspto9")},m(P,z){Z(P,e,z),l(e,t),l(t,s),l(s,n),l(n,i),l(n,r),l(s,a),l(s,d),l(t,c),l(t,f),l(f,v),l(t,I),l(t,x),l(x,C),l(x,b),l(x,M),l(e,T),L[E].m(e,null),q||(U=Me(d,"click",o[13]),q=!0)},p(P,z){z[0]&1&&te(r,P[0]),z[0]&1024&&is(v,"width",P[10]+"%"),z[0]&1024&&p!==(p=Math.round(P[10])+"")&&te(b,p);let N=E;E=G(P),E===N?L[E].p(P,z):(Ht(),Ze(L[N],1,1,()=>{L[N]=null}),Ut(),w=L[E],w?w.p(P,z):(w=L[E]=$[E](P),w.c()),Be(w,1),w.m(e,null))},i(P){Be(w)},o(P){Ze(w)},d(P){P&&g(e),L[E].d(),q=!1,U()}}}function hs(o){const e=Math.floor(o/60),t=o%60;return`${e}:${t.toString().padStart(2,"0")}`}function Mt(o){return o<=30?"text-red-500":o<=60?"text-orange-500":"text-gray-600"}function $s(o,e,t){let s,n,i,r,a,d,_,c,f;Qt(o,Fs,D=>t(17,_=D)),Qt(o,ct,D=>t(18,c=D)),Qt(o,at,D=>t(19,f=D));let{userId:v}=e,{competence:I}=e,{onComplete:x=()=>{}}=e,{onCancel:C=()=>{}}=e,p="",b=3,M=0,T=!1,E=!1,w=180,q;Is(async()=>{try{t(4,T=!0),await Pt.startPreEvaluation(v,I),U()}catch(D){console.error("Erreur lors du d√©marrage de la pr√©-√©valuation:",D)}finally{t(4,T=!1)}}),Ts(()=>{q&&clearInterval(q)});function U(){M=Date.now(),t(6,w=s!=null&&s.time_limit?s.time_limit/1e3:180),q&&clearInterval(q),q=setInterval(()=>{t(6,w--,w),w<=0&&$()},1e3)}function $(){q&&clearInterval(q),L()}async function L(){if(!(!s||T))try{t(4,T=!0);const D=Date.now()-M;if(await Pt.submitResponse(p,D,E?b:void 0),i.isComplete||!i.isActive){const le=Pt.getCurrentEvaluation();q&&clearInterval(q),x(le)}else G(),U()}catch(D){console.error("Erreur lors de la soumission:",D)}finally{t(4,T=!1)}}function G(){t(1,p=""),t(3,b=3),t(5,E=!1)}function P(){t(5,E=!E)}function z(){q&&clearInterval(q),Pt.resetEvaluation(),C()}const N=[[],[]];function B(){p=this.__value,t(1,p)}function W(){p=this.__value,t(1,p)}function Y(){b=this.__value,t(3,b)}return o.$$set=D=>{"userId"in D&&t(14,v=D.userId),"competence"in D&&t(0,I=D.competence),"onComplete"in D&&t(15,x=D.onComplete),"onCancel"in D&&t(16,C=D.onCancel)},o.$$.update=()=>{o.$$.dirty[0]&524288&&t(2,s=f),o.$$.dirty[0]&262144&&t(10,n=c),o.$$.dirty[0]&131072&&(i=_),o.$$.dirty[0]&4&&t(9,r=(s==null?void 0:s.type)==="multiple_choice"),o.$$.dirty[0]&4&&t(8,a=(s==null?void 0:s.type)==="true_false"),o.$$.dirty[0]&2&&t(7,d=p!==""&&(Array.isArray(p)?p.length>0:!0))},[I,p,s,b,T,E,w,d,a,r,n,L,P,z,v,x,C,_,c,f,B,N,W,Y]}class en extends ks{constructor(e){super(),Ss(this,e,$s,Zs,qs,{userId:14,competence:0,onComplete:15,onCancel:16},null,[-1,-1])}}function gs(o,e,t){const s=o.slice();return s[12]=e[t],s}function vs(o,e,t){const s=o.slice();return s[15]=e[t],s}function _s(o,e,t){const s=o.slice();return s[12]=e[t],s}function bs(o,e,t){const s=o.slice();return s[9]=e[t],s[10]=e,s[11]=t,s}function tn(o){var Kt,Wt,Yt,Xt,Zt,$t,es,ts;let e,t,s="üìä R√©sultats et Analyse",n,i,r,a,d="üéØ √âvaluation Adaptative",_,c,f,v,I="Niveau d√©tect√©:",x,C=(((Kt=o[2])==null?void 0:Kt.level)||"Non d√©termin√©")+"",p,b,M,T,E="Score:",w,q=(((Wt=o[2])==null?void 0:Wt.score)||0)+"",U,$,L,G,P,z="Questions r√©pondues:",N,B=(((Xt=(Yt=o[2])==null?void 0:Yt.answers)==null?void 0:Xt.length)||0)+"",W,Y,D,le="Recommandations:",ce,de,He,fe,Ce,we="üß† Analyse M√©tacognitive",pe,se,Ee,me="<strong>Strat√©gies identifi√©es:</strong>",Te,he,Qe,ge,Se,pt="Niveau de conscience:",$e,ve=(((Zt=o[4])==null?void 0:Zt.awarenessLevel)||"Non √©valu√©")+"",X,F,Q,O="Recommandations m√©tacognitives:",ze,_e,Le,qe,be,mt="üîß Donn√©es de Debug",et,ye,Re,ht="Voir les donn√©es brutes",Ve,Pe,je=JSON.stringify({assessmentResults:o[2],metacognitionResults:o[4]},null,2)+"",Ae,tt,Ne,Gt="üîÑ Recommencer le test",Dt,Jt,st=ae((($t=o[2])==null?void 0:$t.recommendations)||[]),ne=[];for(let A=0;A<st.length;A+=1)ne[A]=ys(_s(o,st,A));let nt=ae(((es=o[4])==null?void 0:es.strategies)||[]),ie=[];for(let A=0;A<nt.length;A+=1)ie[A]=xs(vs(o,nt,A));let it=ae(((ts=o[4])==null?void 0:ts.recommendations)||[]),re=[];for(let A=0;A<it.length;A+=1)re[A]=Cs(gs(o,it,A));return{c(){e=m("section"),t=m("h2"),t.textContent=s,n=k(),i=m("div"),r=m("div"),a=m("h3"),a.textContent=d,_=k(),c=m("div"),f=m("p"),v=m("strong"),v.textContent=I,x=k(),p=V(C),b=k(),M=m("p"),T=m("strong"),T.textContent=E,w=k(),U=V(q),$=V("/100"),L=k(),G=m("p"),P=m("strong"),P.textContent=z,N=k(),W=V(B),Y=k(),D=m("h4"),D.textContent=le,ce=k(),de=m("ul");for(let A=0;A<ne.length;A+=1)ne[A].c();He=k(),fe=m("div"),Ce=m("h3"),Ce.textContent=we,pe=k(),se=m("div"),Ee=m("p"),Ee.innerHTML=me,Te=k(),he=m("ul");for(let A=0;A<ie.length;A+=1)ie[A].c();Qe=k(),ge=m("p"),Se=m("strong"),Se.textContent=pt,$e=k(),X=V(ve),F=k(),Q=m("h4"),Q.textContent=O,ze=k(),_e=m("ul");for(let A=0;A<re.length;A+=1)re[A].c();Le=k(),qe=m("div"),be=m("h3"),be.textContent=mt,et=k(),ye=m("details"),Re=m("summary"),Re.textContent=ht,Ve=k(),Pe=m("pre"),Ae=V(je),tt=k(),Ne=m("button"),Ne.textContent=Gt,this.h()},l(A){e=h(A,"SECTION",{class:!0});var J=y(e);t=h(J,"H2",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-16f1xuo"&&(t.textContent=s),n=S(J),i=h(J,"DIV",{class:!0});var K=y(i);r=h(K,"DIV",{class:!0});var Ue=y(r);a=h(Ue,"H3",{class:!0,"data-svelte-h":!0}),H(a)!=="svelte-1jysfoi"&&(a.textContent=d),_=S(Ue),c=h(Ue,"DIV",{class:!0});var ue=y(c);f=h(ue,"P",{class:!0});var Fe=y(f);v=h(Fe,"STRONG",{"data-svelte-h":!0}),H(v)!=="svelte-mk5csw"&&(v.textContent=I),x=S(Fe),p=j(Fe,C),Fe.forEach(g),b=S(ue),M=h(ue,"P",{class:!0});var Oe=y(M);T=h(Oe,"STRONG",{"data-svelte-h":!0}),H(T)!=="svelte-14742k0"&&(T.textContent=E),w=S(Oe),U=j(Oe,q),$=j(Oe,"/100"),Oe.forEach(g),L=S(ue),G=h(ue,"P",{class:!0});var Ge=y(G);P=h(Ge,"STRONG",{"data-svelte-h":!0}),H(P)!=="svelte-1qflyc2"&&(P.textContent=z),N=S(Ge),W=j(Ge,B),Ge.forEach(g),Y=S(ue),D=h(ue,"H4",{"data-svelte-h":!0}),H(D)!=="svelte-i8vz1g"&&(D.textContent=le),ce=S(ue),de=h(ue,"UL",{class:!0});var gt=y(de);for(let ke=0;ke<ne.length;ke+=1)ne[ke].l(gt);gt.forEach(g),ue.forEach(g),Ue.forEach(g),He=S(K),fe=h(K,"DIV",{class:!0});var Je=y(fe);Ce=h(Je,"H3",{class:!0,"data-svelte-h":!0}),H(Ce)!=="svelte-157jmd0"&&(Ce.textContent=we),pe=S(Je),se=h(Je,"DIV",{class:!0});var R=y(se);Ee=h(R,"P",{class:!0,"data-svelte-h":!0}),H(Ee)!=="svelte-4rtwdl"&&(Ee.innerHTML=me),Te=S(R),he=h(R,"UL",{class:!0});var Ie=y(he);for(let ke=0;ke<ie.length;ke+=1)ie[ke].l(Ie);Ie.forEach(g),Qe=S(R),ge=h(R,"P",{class:!0});var Ct=y(ge);Se=h(Ct,"STRONG",{"data-svelte-h":!0}),H(Se)!=="svelte-19ys1g1"&&(Se.textContent=pt),$e=S(Ct),X=j(Ct,ve),Ct.forEach(g),F=S(R),Q=h(R,"H4",{"data-svelte-h":!0}),H(Q)!=="svelte-9sb7uc"&&(Q.textContent=O),ze=S(R),_e=h(R,"UL",{class:!0});var ss=y(_e);for(let ke=0;ke<re.length;ke+=1)re[ke].l(ss);ss.forEach(g),R.forEach(g),Je.forEach(g),K.forEach(g),Le=S(J),qe=h(J,"DIV",{class:!0});var wt=y(qe);be=h(wt,"H3",{class:!0,"data-svelte-h":!0}),H(be)!=="svelte-jnzqm2"&&(be.textContent=mt),et=S(wt),ye=h(wt,"DETAILS",{});var Et=y(ye);Re=h(Et,"SUMMARY",{"data-svelte-h":!0}),H(Re)!=="svelte-12922xx"&&(Re.textContent=ht),Ve=S(Et),Pe=h(Et,"PRE",{class:!0});var ns=y(Pe);Ae=j(ns,je),ns.forEach(g),Et.forEach(g),wt.forEach(g),tt=S(J),Ne=h(J,"BUTTON",{class:!0,"data-svelte-h":!0}),H(Ne)!=="svelte-12l17ty"&&(Ne.textContent=Gt),J.forEach(g),this.h()},h(){u(t,"class","svelte-ubmtgp"),u(a,"class","svelte-ubmtgp"),u(f,"class","svelte-ubmtgp"),u(M,"class","svelte-ubmtgp"),u(G,"class","svelte-ubmtgp"),u(de,"class","svelte-ubmtgp"),u(c,"class","result-content svelte-ubmtgp"),u(r,"class","result-card svelte-ubmtgp"),u(Ce,"class","svelte-ubmtgp"),u(Ee,"class","svelte-ubmtgp"),u(he,"class","svelte-ubmtgp"),u(ge,"class","svelte-ubmtgp"),u(_e,"class","svelte-ubmtgp"),u(se,"class","result-content svelte-ubmtgp"),u(fe,"class","result-card svelte-ubmtgp"),u(i,"class","results-grid svelte-ubmtgp"),u(be,"class","svelte-ubmtgp"),u(Pe,"class","svelte-ubmtgp"),u(qe,"class","debug-section svelte-ubmtgp"),u(Ne,"class","reset-btn svelte-ubmtgp"),u(e,"class","results-section svelte-ubmtgp")},m(A,J){Z(A,e,J),l(e,t),l(e,n),l(e,i),l(i,r),l(r,a),l(r,_),l(r,c),l(c,f),l(f,v),l(f,x),l(f,p),l(c,b),l(c,M),l(M,T),l(M,w),l(M,U),l(M,$),l(c,L),l(c,G),l(G,P),l(G,N),l(G,W),l(c,Y),l(c,D),l(c,ce),l(c,de);for(let K=0;K<ne.length;K+=1)ne[K]&&ne[K].m(de,null);l(i,He),l(i,fe),l(fe,Ce),l(fe,pe),l(fe,se),l(se,Ee),l(se,Te),l(se,he);for(let K=0;K<ie.length;K+=1)ie[K]&&ie[K].m(he,null);l(se,Qe),l(se,ge),l(ge,Se),l(ge,$e),l(ge,X),l(se,F),l(se,Q),l(se,ze),l(se,_e);for(let K=0;K<re.length;K+=1)re[K]&&re[K].m(_e,null);l(e,Le),l(e,qe),l(qe,be),l(qe,et),l(qe,ye),l(ye,Re),l(ye,Ve),l(ye,Pe),l(Pe,Ae),l(e,tt),l(e,Ne),Dt||(Jt=Me(Ne,"click",o[7]),Dt=!0)},p(A,J){var K,Ue,ue,Fe,Oe,Ge,gt,Je;if(J&4&&C!==(C=(((K=A[2])==null?void 0:K.level)||"Non d√©termin√©")+"")&&te(p,C),J&4&&q!==(q=(((Ue=A[2])==null?void 0:Ue.score)||0)+"")&&te(U,q),J&4&&B!==(B=(((Fe=(ue=A[2])==null?void 0:ue.answers)==null?void 0:Fe.length)||0)+"")&&te(W,B),J&4){st=ae(((Oe=A[2])==null?void 0:Oe.recommendations)||[]);let R;for(R=0;R<st.length;R+=1){const Ie=_s(A,st,R);ne[R]?ne[R].p(Ie,J):(ne[R]=ys(Ie),ne[R].c(),ne[R].m(de,null))}for(;R<ne.length;R+=1)ne[R].d(1);ne.length=st.length}if(J&16){nt=ae(((Ge=A[4])==null?void 0:Ge.strategies)||[]);let R;for(R=0;R<nt.length;R+=1){const Ie=vs(A,nt,R);ie[R]?ie[R].p(Ie,J):(ie[R]=xs(Ie),ie[R].c(),ie[R].m(he,null))}for(;R<ie.length;R+=1)ie[R].d(1);ie.length=nt.length}if(J&16&&ve!==(ve=(((gt=A[4])==null?void 0:gt.awarenessLevel)||"Non √©valu√©")+"")&&te(X,ve),J&16){it=ae(((Je=A[4])==null?void 0:Je.recommendations)||[]);let R;for(R=0;R<it.length;R+=1){const Ie=gs(A,it,R);re[R]?re[R].p(Ie,J):(re[R]=Cs(Ie),re[R].c(),re[R].m(_e,null))}for(;R<re.length;R+=1)re[R].d(1);re.length=it.length}J&20&&je!==(je=JSON.stringify({assessmentResults:A[2],metacognitionResults:A[4]},null,2)+"")&&te(Ae,je)},i:ut,o:ut,d(A){A&&g(e),Xe(ne,A),Xe(ie,A),Xe(re,A),Dt=!1,Jt()}}}function sn(o){let e,t,s="ü§î R√©flexion M√©tacognitive",n,i,r="R√©fl√©chissez sur votre processus d'apprentissage",a,d,_,c,f,v,I,x,C=ae(o[3]),p=[];for(let b=0;b<C.length;b+=1)p[b]=ws(bs(o,C,b));return{c(){e=m("section"),t=m("h2"),t.textContent=s,n=k(),i=m("p"),i.textContent=r,a=k(),d=m("div");for(let b=0;b<p.length;b+=1)p[b].c();_=k(),c=m("button"),f=V("Terminer la r√©flexion"),this.h()},l(b){e=h(b,"SECTION",{class:!0});var M=y(e);t=h(M,"H2",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-1sd7r8j"&&(t.textContent=s),n=S(M),i=h(M,"P",{"data-svelte-h":!0}),H(i)!=="svelte-1v5ddhn"&&(i.textContent=r),a=S(M),d=h(M,"DIV",{class:!0});var T=y(d);for(let w=0;w<p.length;w+=1)p[w].l(T);T.forEach(g),_=S(M),c=h(M,"BUTTON",{class:!0});var E=y(c);f=j(E,"Terminer la r√©flexion"),E.forEach(g),M.forEach(g),this.h()},h(){u(t,"class","svelte-ubmtgp"),u(d,"class","prompts-container svelte-ubmtgp"),u(c,"class","complete-btn svelte-ubmtgp"),c.disabled=v=!o[3].every(Es),u(e,"class","metacognition-section svelte-ubmtgp")},m(b,M){Z(b,e,M),l(e,t),l(e,n),l(e,i),l(e,a),l(e,d);for(let T=0;T<p.length;T+=1)p[T]&&p[T].m(d,null);l(e,_),l(e,c),l(c,f),I||(x=Me(c,"click",o[6]),I=!0)},p(b,M){if(M&8){C=ae(b[3]);let T;for(T=0;T<C.length;T+=1){const E=bs(b,C,T);p[T]?p[T].p(E,M):(p[T]=ws(E),p[T].c(),p[T].m(d,null))}for(;T<p.length;T+=1)p[T].d(1);p.length=C.length}M&8&&v!==(v=!b[3].every(Es))&&(c.disabled=v)},i:ut,o:ut,d(b){b&&g(e),Xe(p,b),I=!1,x()}}}function nn(o){let e,t,s="üìù √âvaluation Pr√©-Adaptative",n,i,r="Cette √©valuation adaptera automatiquement la difficult√© selon vos r√©ponses",a,d,_;return d=new en({props:{userId:o[0],competence:"biologie",onComplete:o[5]}}),{c(){e=m("section"),t=m("h2"),t.textContent=s,n=k(),i=m("p"),i.textContent=r,a=k(),Qs(d.$$.fragment),this.h()},l(c){e=h(c,"SECTION",{class:!0});var f=y(e);t=h(f,"H2",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-1k897uf"&&(t.textContent=s),n=S(f),i=h(f,"P",{"data-svelte-h":!0}),H(i)!=="svelte-4k7mt8"&&(i.textContent=r),a=S(f),zs(d.$$.fragment,f),f.forEach(g),this.h()},h(){u(t,"class","svelte-ubmtgp"),u(e,"class","assessment-section svelte-ubmtgp")},m(c,f){Z(c,e,f),l(e,t),l(e,n),l(e,i),l(e,a),Ls(d,e,null),_=!0},p(c,f){const v={};f&1&&(v.userId=c[0]),d.$set(v)},i(c){_||(Be(d.$$.fragment,c),_=!0)},o(c){Ze(d.$$.fragment,c),_=!1},d(c){c&&g(e),Vs(d)}}}function ys(o){let e,t=o[12]+"",s;return{c(){e=m("li"),s=V(t),this.h()},l(n){e=h(n,"LI",{class:!0});var i=y(e);s=j(i,t),i.forEach(g),this.h()},h(){u(e,"class","svelte-ubmtgp")},m(n,i){Z(n,e,i),l(e,s)},p(n,i){i&4&&t!==(t=n[12]+"")&&te(s,t)},d(n){n&&g(e)}}}function xs(o){let e,t=o[15]+"",s;return{c(){e=m("li"),s=V(t),this.h()},l(n){e=h(n,"LI",{class:!0});var i=y(e);s=j(i,t),i.forEach(g),this.h()},h(){u(e,"class","svelte-ubmtgp")},m(n,i){Z(n,e,i),l(e,s)},p(n,i){i&16&&t!==(t=n[15]+"")&&te(s,t)},d(n){n&&g(e)}}}function Cs(o){let e,t=o[12]+"",s;return{c(){e=m("li"),s=V(t),this.h()},l(n){e=h(n,"LI",{class:!0});var i=y(e);s=j(i,t),i.forEach(g),this.h()},h(){u(e,"class","svelte-ubmtgp")},m(n,i){Z(n,e,i),l(e,s)},p(n,i){i&16&&t!==(t=n[12]+"")&&te(s,t)},d(n){n&&g(e)}}}function ws(o){let e,t,s=o[9].category+"",n,i,r,a=o[9].text+"",d,_,c,f,v,I;function x(){o[8].call(c,o[10],o[11])}return{c(){e=m("div"),t=m("h3"),n=V(s),i=k(),r=m("p"),d=V(a),_=k(),c=m("textarea"),f=k(),this.h()},l(C){e=h(C,"DIV",{class:!0});var p=y(e);t=h(p,"H3",{class:!0});var b=y(t);n=j(b,s),b.forEach(g),i=S(p),r=h(p,"P",{});var M=y(r);d=j(M,a),M.forEach(g),_=S(p),c=h(p,"TEXTAREA",{placeholder:!0,rows:!0,class:!0}),y(c).forEach(g),f=S(p),p.forEach(g),this.h()},h(){u(t,"class","svelte-ubmtgp"),u(c,"placeholder","Votre r√©flexion..."),u(c,"rows","3"),u(c,"class","svelte-ubmtgp"),u(e,"class","prompt-card svelte-ubmtgp")},m(C,p){Z(C,e,p),l(e,t),l(t,n),l(e,i),l(e,r),l(r,d),l(e,_),l(e,c),dt(c,o[9].userResponse),l(e,f),v||(I=Me(c,"input",x),v=!0)},p(C,p){o=C,p&8&&s!==(s=o[9].category+"")&&te(n,s),p&8&&a!==(a=o[9].text+"")&&te(d,a),p&8&&dt(c,o[9].userResponse)},d(C){C&&g(e),v=!1,I()}}}function rn(o){let e,t,s,n,i="üß™ Test Phase 4 - Syst√®me de P√©dagogie Adaptative",r,a,d="Test des fonctionnalit√©s d'√©valuation adaptative et de m√©tacognition",_,c,f,v="1. √âvaluation Adaptative",I,x,C="2. M√©tacognition",p,b,M="3. R√©sultats",T,E,w,q,U;const $=[nn,sn,tn],L=[];function G(P,z){return P[1]==="assessment"?0:P[1]==="metacognition"?1:P[1]==="results"?2:-1}return~(w=G(o))&&(q=L[w]=$[w](o)),{c(){e=k(),t=m("div"),s=m("header"),n=m("h1"),n.textContent=i,r=k(),a=m("p"),a.textContent=d,_=k(),c=m("div"),f=m("div"),f.textContent=v,I=k(),x=m("div"),x.textContent=C,p=k(),b=m("div"),b.textContent=M,T=k(),E=m("main"),q&&q.c(),this.h()},l(P){As("svelte-gq2uvf",document.head).forEach(g),e=S(P),t=h(P,"DIV",{class:!0});var N=y(t);s=h(N,"HEADER",{class:!0});var B=y(s);n=h(B,"H1",{class:!0,"data-svelte-h":!0}),H(n)!=="svelte-1yiorxq"&&(n.textContent=i),r=S(B),a=h(B,"P",{"data-svelte-h":!0}),H(a)!=="svelte-s2jjg9"&&(a.textContent=d),_=S(B),c=h(B,"DIV",{class:!0});var W=y(c);f=h(W,"DIV",{class:!0,"data-svelte-h":!0}),H(f)!=="svelte-1si2ice"&&(f.textContent=v),I=S(W),x=h(W,"DIV",{class:!0,"data-svelte-h":!0}),H(x)!=="svelte-mencni"&&(x.textContent=C),p=S(W),b=h(W,"DIV",{class:!0,"data-svelte-h":!0}),H(b)!=="svelte-13ys6dk"&&(b.textContent=M),W.forEach(g),B.forEach(g),T=S(N),E=h(N,"MAIN",{class:!0});var Y=y(E);q&&q.l(Y),Y.forEach(g),N.forEach(g),this.h()},h(){document.title="Test Phase 4 - P√©dagogie Adaptative",u(n,"class","svelte-ubmtgp"),u(f,"class","step svelte-ubmtgp"),rt(f,"active",o[1]==="assessment"),u(x,"class","step svelte-ubmtgp"),rt(x,"active",o[1]==="metacognition"),u(b,"class","step svelte-ubmtgp"),rt(b,"active",o[1]==="results"),u(c,"class","steps-indicator svelte-ubmtgp"),u(s,"class","test-header svelte-ubmtgp"),u(E,"class","test-content svelte-ubmtgp"),u(t,"class","test-container svelte-ubmtgp")},m(P,z){Z(P,e,z),Z(P,t,z),l(t,s),l(s,n),l(s,r),l(s,a),l(s,_),l(s,c),l(c,f),l(c,I),l(c,x),l(c,p),l(c,b),l(t,T),l(t,E),~w&&L[w].m(E,null),U=!0},p(P,[z]){(!U||z&2)&&rt(f,"active",P[1]==="assessment"),(!U||z&2)&&rt(x,"active",P[1]==="metacognition"),(!U||z&2)&&rt(b,"active",P[1]==="results");let N=w;w=G(P),w===N?~w&&L[w].p(P,z):(q&&(Ht(),Ze(L[N],1,1,()=>{L[N]=null}),Ut()),~w?(q=L[w],q?q.p(P,z):(q=L[w]=$[w](P),q.c()),Be(q,1),q.m(E,null)):q=null)},i(P){U||(Be(q),U=!0)},o(P){Ze(q),U=!1},d(P){P&&(g(e),g(t)),~w&&L[w].d()}}}const Es=o=>{var e;return(e=o.userResponse)==null?void 0:e.trim()};function on(o,e,t){let s="test-student-"+Date.now(),n="assessment",i=null,r=[],a=null;Is(()=>{console.log("Phase 4 Test Component mounted")});function d(v){console.log("Assessment completed:",v.detail),t(2,i=v.detail),t(3,r=[{id:"strategy",category:"Strat√©gie d'apprentissage",text:"Quelle strat√©gie avez-vous utilis√©e pour r√©pondre aux questions ?",userResponse:""},{id:"difficulty",category:"Perception de difficult√©",text:"Quelles questions vous ont sembl√© les plus difficiles et pourquoi ?",userResponse:""},{id:"confidence",category:"Confiance",text:"√Ä quel point √©tiez-vous confiant dans vos r√©ponses ?",userResponse:""}]),t(1,n="metacognition")}function _(){r.map(v=>({promptId:v.id,response:v.userResponse||""})),t(4,a={strategies:["R√©flexion analytique","Utilisation des connaissances ant√©rieures"],awarenessLevel:"√âlev√©",recommendations:["Continuer √† utiliser l'analyse structur√©e","Approfondir les concepts de base en biologie","Pratiquer davantage les questions de difficult√© √©lev√©e"]}),t(1,n="results")}function c(){t(1,n="assessment"),t(2,i=null),t(3,r=[]),t(4,a=null),t(0,s="test-student-"+Date.now())}function f(v,I){v[I].userResponse=this.value,t(3,r)}return[s,n,i,r,a,d,_,c,f]}class pn extends ks{constructor(e){super(),Ss(this,e,on,rn,qs,{})}}export{pn as component};
